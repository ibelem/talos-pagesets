var SGT={};SGT.AJAX_URL="httpdisabled://search.goo.ne.jp/sgt.jsp";SGT.OPTION_URL="httpdisabled://search.goo.ne.jp/advanced.jsp#p02";SGT.GREEN_OPTION_URL="httpdisabled://green.search.goo.ne.jp/advanced.jsp#p02";SGT.CLICK_URL="httpdisabled://search.goo.ne.jp/log.click";SGT.URL_WEBSEARCH="httpdisabled://search.goo.ne.jp/web.jsp?IE=UTF-8&MT=";SGT.URL_GREEN="httpdisabled://green.search.goo.ne.jp/search?IE=UTF-8&MT=";SGT.INPUT_ID="searchtop";SGT.SEARCH_FORM_ID="gooSearch";SGT.TOP_FORM_ID="hd-t-1_body";SGT.FROM_VALUE="suggest_";SGT.FROM_VALUE_SQ="suggest_sq_";SGT.CL_GOOTOP="top";SGT.CL_WEBSEARCH="search";SGT.CL_GREEN_GOOTOP="greentop";SGT.CL_GREEN_TOP="green_s_top";SGT.CL_GREEN_SEARCH="green";SGT.CLICK_ID_SQWORD="sg_sqword_";SGT.CLICK_ID_WORD="sg_word_";SGT.CLICK_ID_OPTION="sg_option_";SGT.CLICK_ID_OFF="sg_off_";SGT.INPUT_DEFAULT_WIDTH=344;SGT.INPUT_DEFAULT_HEIGHT=16;SGT.BALLOON_WIDTH=230;SGT.DILAY_TIME=0;SGT.WORD_MAX=10;SGT.CHAR_NUM=1;var sgtLoadJsonp=null;var sgtIsTarget=true;var sgtCookie=null;var gooSuggest=function(){this.suggest=null;this.cursor=-1;this.cursor2=0;this.main_ary=[];this.sub_ary=[];this.subMode=false;this.timerID=null;this.MT="";this.ajax_url=SGT.AJAX_URL;this.IE="UTF-8";this.format="jsonp";this.client=Utils.getClient();this.opt_url=(this.client.search("green")!=-1)?SGT.GREEN_OPTION_URL:SGT.OPTION_URL;this.cookie=sgtCookie;this.sgt_flag="1";this.sgtWordClickFlg=false;this.sgtReoperationFlg=false;this.fromValue=goo.$("from").value;this.formId=(location.hostname.search("search.goo.ne.jp")!=-1)?SGT.SEARCH_FORM_ID:SGT.TOP_FORM_ID;this.form=goo.$(this.formId);if(!this.form){this.formId=SGT.SEARCH_FORM_ID;this.form=goo.$(this.formId)}this.input=goo.$(SGT.INPUT_ID);this.width=SGT.INPUT_DEFAULT_WIDTH;this.height=SGT.INPUT_DEFAULT_HEIGHT;if(this.input){this.init()}};gooSuggest.prototype={init:function(){var f=this;var c=f.input;c.bind("keydown",function(h){f.keyDown(h)});c.bind("keyup",function(h){f.keyUp(h)});c.bind("focus",function(h){f.focus(h)});goo.$(document.body).bind("click",function(){f.clear()});goo.$(f.form).bind("submit",function(h){f.submit(h)});goo.$(window).bind("resize",function(){f.resize()});var e=(c.currentStyle)?c.currentStyle:window.getComputedStyle(c,null);var g=function(h){return h==""?0:parseInt(h.replace("px",""))};var b=g(e.width);var d=g(e.height);var a=g(e.borderTopWidth);if(navigator.appName=="Microsoft Internet Explorer"){d=20}else{d+=a;b+=a}f.width=b;f.height=d;f.toggleSuggest();f.input.focus();f.enable()},focus:function(b){var a=this.input;this.MT=a.value;b.stopPropagation();if(this.input.value==this.MT&&this.input.value.length>=SGT.CHAR_NUM){this.sgtWordClickFlg=true}},submit:function(a){if(this.cursor>-1){a.preventDefault();a.stopPropagation()}},checkInput:function(){_s=this;_s.disable();if(_s.input.value.length==0){_s.MT="";_s.clear()}if(_s.suggest==null){_s.cursor=-1}if(_s.sgt_flag!=0&&_s.trimMT(_s.input.value)!=_s.trimMT(_s.MT)&&_s.input.value.length>=SGT.CHAR_NUM||_s.sgtReoperationFlg==true){setTimeout(function(){_s.access.apply(_s)},SGT.DILAY_TIME);_s.sgtWordClickFlg=false;_s.sgtReoperationFlg=false}else{if(_s.trimMT(_s.input.value)!=_s.trimMT(_s.MT)){_s.clear()}_s.enable()}},trimMT:function(a){a=a.replace("\u3000","\u0020");a=a.replace(/^[\u3000\s]*/gi,"");return a},access:function(){_s=this;if(!sgtIsTarget){return}_s.MT=_s.input.value;var b=new Date().getTime();var a=_s.ajax_url+"?MT="+encodeURI(_s.trimMT(_s.MT))+"&IE="+_s.IE+"&CL="+_s.client;Utils.getJson(a,function(c){_s.loaddisabled(c)});_s.cursor=-1;_s.enable()},toggleSuggest:function(){this.sgt_flag=1;this.input.setAttribute("autocomplete","off")},keyDown:function(b){var a=(b.charCode)?b.charCode:b.keyCode;_s=this;switch(a){case 46:_s.clearSub();_s.cursor=-1;break;case 8:_s.clearSub();_s.cursor=-1;if(_s.sgtWordClickFlg){_s.changeFormFromValue()}_s.sgtWordClickFlg=false;break;case 17:case 16:b.stopPropagation();break;case 39:_s.dispSub();_s.cursor2=0;_s.showCursor2();break;case 38:if(_s.subMode){_s.upCursor2();_s.select2()}else{_s.upCursor();_s.select();_s.clearSub()}b.stopPropagation();break;case 40:if(_s.subMode){_s.downCursor2();_s.select2()}else{_s.downCursor();_s.select();if(_s.sgtWordClickFlg&&_s.sgt_flag!=0&&_s.input.value==_s.MT&&_s.input.value.length>=SGT.CHAR_NUM){_s.sgtReoperationFlg=true}_s.clearSub()}b.stopPropagation();break;case 13:if(_s.subMode){_s.select2();_s.clear();voidClicklog(SGT.CLICK_ID_SQWORD+_s.client)}else{if(_s.cursor>-1){_s.select();_s.clear();voidClicklog(SGT.CLICK_ID_WORD+_s.client)}else{return true}}break;case 27:if(_s.subMode){_s.clearSub();_s.select()}else{_s.clear()}break;case 229:if(_s.sgtWordClickFlg){_s.changeFormFromValue()}break;default:if(_s.sgtWordClickFlg){_s.changeFormFromValue()}break}},keyUp:function(b){var a=(b.charCode)?b.charCode:b.keyCode;_s=this;switch(a){case 8:case 46:_s.MT=_s.input.value;break}},loaddisabled:function(a){if(a==null){sgtIsTarget=false;this.clear();return}if(!a.items){this.clear();return}if(goo.$("suggest")){this.clear()}if(a.MT==""){return true}this.createMain(a.items)},createMain:function(g){_s=this;_s.suggest=Utils.cl("ul");_s.suggest.id="suggest";_s.setpos();var i=0;var h=g;if(h.length>SGT.WORD_MAX){h.length=SGT.WORD_MAX}var e=0;goo.each(h,function(k){var m=[];var j=Utils.cl("li");m.word=this["word"];m.dispWord=this["dispWord"];var n=this["nallows"];_s.sub_ary[k]=n;var o=Utils.cl("div");o.id="sg_word_"+k;o.style.width="100%";var l=Utils.cl("span");l.id="sg_box_"+k;l.innerHTML=m.dispWord;l.style.position="relative";if(n!=null){l.innerHTML+="&nbsp;&raquo;";o.appendChild(_s.createSub(n,k))}o.appendChild(l);j.appendChild(o);goo.$(j).bind("mouseover",function(r){r.stopPropagation();var q=_s.cursor;_s.cursor=_s.getCursorPos(r);if(q==_s.cursor){return}var p=_s.sub_ary[q];if(p){_s.clearSub(q)}p=_s.sub_ary[_s.cursor];if(p){_s.dispSub()}_s.showCursor()});goo.$(j).bind("click",function(q){q.preventDefault();_s.cursor=_s.getCursorPos(q);var r=_s.select();_s.clear();_s.putBackFocus();var p=_s.getSearchUrl()+encodeURIComponent(_s.MT)+"&from="+r;voidClicklog(SGT.CLICK_ID_WORD+_s.client);location.href=p});m.elem=j;_s.main_ary[i++]=m;_s.suggest.appendChild(j);e++});var b=goo.$(Utils.cl("li"));b.id="info_box";var f=Utils.cl("span");var c=SGT.CLICK_ID_OPTION+_s.client;var d='<a href="'+_s.opt_url+'" onclick="voidClicklog(\''+c+"');\">";d+="\u5165\u529B\u88DC\u52A9\u306E\u8A2D\u5B9A</a> | ";f.innerHTML=d;var a=goo.$(Utils.cl("span"));a.update('<a href="javascript:void(0);">\u6A5F\u80FD\u306E\u30AA\u30D5</a>');a.bind("click",function(){_s.setSuggestCookie()});b.bind("mouseover",function(){_s.clearSub(null)});b.appendChild(f);b.appendChild(a);_s.suggest.appendChild(b);if(e!=0){document.body.appendChild(_s.suggest)}},createSub:function(b,e){var f=this;var d=goo.$(Utils.cl("ul"));d.id="nallows_ul_"+e;d.className="nallow_ul";d.style.display="none";d.style.width="200px";var a=Utils.cl("li");a.className="balloon";d.appendChild(a);var c=this.getSearchUrl();goo.each(b,function(h,l){var g=goo.$(Utils.cl("li"));var k="nallows_li_"+e+"_"+h;var i="select_nallows_word_"+e+"_"+h;g.id=k;g.className="normal";g.update("<span>"+l.dispWord+'</span><input type="hidden" id="'+i+'" value="'+this["word"]+'">');g.bind("mouseover",function(m){m.stopPropagation();if(f.cursor<0||f.suggest==null){return}if(f.cursor>=f.sub_ary.length){return}var j=f.sub_ary[f.cursor];if(j==null){return}f.cursor2=h;if(f.cursor2<0||f.cursor2>j.length){return}f.showCursor2()});g.bind("mouseout",function(j){j.stopPropagation()});g.bind("click",function(m){m.stopPropagation();voidClicklog(SGT.CLICK_ID_SQWORD+f.client);var j=f.getCursorWord()+" "+goo.$(i).value;f.disable();f.clear();f.input.value=j;location.href=c+encodeURIComponent(j)+"&from="+SGT.FROM_VALUE_SQ+f.client});d.appendChild(g)});d.bind("mouseout",function(h){h.stopPropagation();var g=f.cursor;f.cursor=f.getCursorPos(h);if(g==f.cursor){return}f.clearSub()});return d},clear:function(){if(this.suggest==null){return}document.body.removeChild(this.suggest);this.suggest=null;this.main_ary=[];this.cursor=-1;this.clearSub()},getCursorWord:function(){var b=this;if(b.cursor<0||b.suggest==null){return""}var a=b.main_ary[b.cursor];if(a==null){return""}return a.word},getCursorWord2:function(){var b=this;if(b.cursor<0||b.suggest==null){return""}if(b.cursor>=b.sub_ary.length){return""}var a=b.sub_ary[b.cursor];if(a==null){return""}if(b.cursor2<0||b.cursor2>a.length){return""}return a[b.cursor2]["word"]},select:function(){var a=this.getCursorWord();if(a==""){return""}this.changeMt(a);var b=goo.$("from");b.value=SGT.FROM_VALUE+this.client;return b.value},select2:function(){var a=this.getCursorWord();if(a==""){return true}var b=this.getCursorWord2();a=a+" "+b;this.changeMt(a);var c=goo.$("from");c.value=SGT.FROM_VALUE_SQ+this.client;return false},resize:function(){if(this.suggest==null){return}this.setpos()},setpos:function(){var b=Utils.getPosition(this.input);var a=this.suggest.style;a.left=b[0]+"px";a.top=(b[1]+this.height)+"px";a.width=this.width+"px"},upCursor:function(){var a=this;a.cursor-=1;if(a.cursor<-1){a.cursor=-1}a.showCursor()},downCursor:function(){var b=this;var a=b.main_ary.length;b.cursor+=1;if(b.cursor>=a){b.cursor=a-1}b.showCursor()},showCursor:function(){var b=this;var a=null;if(b.suggest==null){return true}goo.each(b.main_ary,function(){this["elem"].className="normal"});if(b.cursor>-1){b.main_ary[b.cursor]["elem"].className="selected"}return true},upCursor2:function(){var a=this;a.cursor2-=1;if(a.cursor2<0&&a.cursor==0){a.cursor2=0}else{if(a.cursor2<0){a.changeCursor(-1)}else{a.showCursor2()}}},downCursor2:function(){var c=this;var b=c.sub_ary[c.cursor];if(b==null){return}c.cursor2+=1;var a=b.length;if(c.cursor2>=a&&c.cursor>=c.main_ary.length-1){c.cursor2=a-1}else{if(c.cursor2>=a){c.changeCursor(1)}else{c.showCursor2()}}},showCursor2:function(){var c=this;var a=c.sub_ary[c.cursor];if(a==null){return false}goo.each(a,function(e){var g="nallows_li_"+c.cursor+"_"+e;var f=goo.$(g);if(f!=null){f.className="normal"}});if(0<=c.cursor2&&c.cursor2<a.length){var d="nallows_li_"+c.cursor+"_"+c.cursor2;var b=goo.$(d);if(b!=null){b.className="nl_li_selected"}}},changeCursor:function(c){var b=this.cursor;this.cursor=Number(b)+Number(c);var a=this.sub_ary[b];if(a){this.clearSub(b)}if(c>0){a=this.sub_ary[this.cursor];if(a){this.dispSub()}}this.showCursor()},clearSub:function(b){if(b==null){b=this.cursor}var a=this.sub_ary[b];if(a==null){return false}goo.each(a,function(c){var d=goo.$("nallows_li_"+b+"_"+c);if(d!=null){d.className="normal"}});this.cursor2=0;this.subMode=false;goo.each(this.main_ary,function(d){var c=goo.$("nallows_ul_"+d);if(c!=null&&c.getElementsByTagName("li").length!=0){c.display(false)}})},dispSub:function(){var c=this;var d=goo.$("nallows_ul_"+c.cursor);var a=goo.$("sg_box_"+c.cursor);var e=goo.$("suggest");if(d==null||d.getElementsByTagName("li").length==0){return}c.subMode=true;c.cursor2=-1;var b=[a.offsetTop,a.offsetLeft,a.offsetWidth];d.style.left=d.style.right="";if(b[1]+b[2]+SGT.BALLOON_WIDTH>=e.offsetWidth){d.style.right="5px"}else{d.style.left=b[1]+b[2]+"px"}goo.each(c.main_ary,function(g){var f=goo.$("nallows_ul_"+g);if(f){if(c.cursor==g){f.display(true)}else{f.display(false)}}})},getSearchUrl:function(){return(this.client.search("green")!=-1)?SGT.URL_GREEN:SGT.URL_WEBSEARCH},enable:function(){_s=this;this.timerID=setTimeout(function(){_s.checkInput()},50)},disable:function(){if(this.timerID!=null){clearTimeout(this.timerID)}this.timerID=null},changeMt:function(a){this.input.value=a;this.MT=a},setSuggestCookie:function(){this.cookie.setValue("searchstate","SGT","0","=","&",true);this.sgt_flag=0;this.putBackFocus();voidClicklog(SGT.CLICK_ID_OFF+this.client)},putBackFocus:function(){this.input.focus();this.sgtWordClickFlg=true},changeFormFromValue:function(){var a=goo.$("from");a.value=this.fromValue},getCursorPos:function(b){var a=b.target;var f=a.id;var d=this.cursor;var c=-1;if((c=f.lastIndexOf("_"))!=-1){if(c+1<f.length){d=f.substring(c+1,f.length)}}return d}};var Utils={cl:function(a){return document.createElement(a)},getJson:function(b,d){sgtLoadJsonp=d;var c=goo.$("jsonp");if(c){document.body.removeChild(c)}var a=Utils.cl("script");a.id="jsonp";a.type="text/javascript";a.charset="utf-8";a.src=b;document.body.appendChild(a)},getPosition:function(b){var a=0,c=0;do{a+=b.offsetTop||0;c+=b.offsetLeft||0;b=b.offsetParent}while(b);return[c,a]},getClient:function(){var d=location.hostname;var a=sgtCookie.getValue("gooproperty","TH","&");var c=function(e){return(d.search(e)!=-1)?true:false};var b=(c("green.goo.ne.jp"))?SGT.CL_GREEN_TOP:(c("green.search.goo.ne.jp"))?SGT.CL_GREEN_SEARCH:(c("search.goo.ne.jp"))?SGT.CL_WEBSEARCH:(c("goo.ne.jp")&&a==3)?SGT.CL_GREEN_GOOTOP:(c("goo.ne.jp"))?SGT.CL_GOOTOP:"";return b}voidClicklog:function(f,d,e,c){var b=SGT.CLICK_URL+"?from="+f;if(d!=null){b+="&DEST="+encodeURIComponent(d)}if(e!=null&&e!=""){b+="&no="+e}if(c!=null&&c!=""){b+="&opt="+c}b+="&i="+Math.floor(Math.random()*1000);if(parent.adc==null){var a=Utils.cl("iframe");a.setAttribute("name","adc");a.setAttribute("id","adc");a.setAttribute("src","");a.style.display="none";document.body.appendChild(a)}parent.adc.location.href=b;return false}};var Cookie=function(){this.livelong=new Date;this.livelong.setFullYear(this.livelong.getFullYear()+1);this.livelong=this.livelong.toGMTString()};Cookie.prototype={getCookie:function(b){var a=decodeURIComponent(document.cookie);return this._extractValueFromString(b,";",a)},getValue:function(a,d,b){var c=this.getCookie(a);return this._extractValueFromString(d,b,c)},setCookie:function(b,d,c){var a=c?this.livelong:null;document.cookie=b+"="+encodeURIComponent(d)+";domain=.goo.ne.jp;expires="+a+";path=/;";return},setValue:function(j,k,h,g,f,a){var c=this.getCookie(j);var b=this.getValue(j,k,f);if(b!=""){var e=c.split(f);for(var d=0;d<e.length;d++){if(e[d].indexOf(k)!=-1){e[d]=k+g+h}}var c=e.join(f)}else{var c=c+f+k+g+h}this.setCookie(j,c,a)},_extractValueFromString:function(h,c,d){var e=d.split(c);for(var b=0;b<e.length;b++){var j=e[b].replace(/^[\s]+|[\s]+$/g,"");var g=j.indexOf("=");if(-1==g){continue}var a=j.substring(0,g);var f=j.substring(g+1,j.length);if(a==h){return f}}return""}};function createSuggest(){sgtCookie=new Cookie();var a=sgtCookie.getValue("searchstate","SGT","&");if(a!=0||a==""){sgtObj=new gooSuggest()}};