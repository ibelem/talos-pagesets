var mineEmbedClient={};(function($){mineEmbedClient={embedServiceEndpoint:"",siteUrl:"",loaddisabledJavaScriptFile:function(strScript){var objNewScriptInclude=document.createElement("script");objNewScriptInclude.setAttribute("type","text/javascript");objNewScriptInclude.setAttribute("src",strScript);document.getElementById("scripts").appendChild(objNewScriptInclude);},callEmbedService:function(strMethod,strArgumentArray){var strUrl=this.embedServiceEndpoint+"&strMethod="+strMethod+"&hash="+Math.random();function encode(s){return encodeURIComponent(s);}
for(var strKey in strArgumentArray){var strValue=strArgumentArray[strKey];strUrl+="&"+encode(strKey)+"="+encode(strValue);}
this.loaddisabledJavaScriptFile(strUrl);},doLogin:function(){var objErrorMessage=document.getElementById("embedError");objErrorMessage.innerHTML="";var strImageId=document.getElementById("embedImageId").value;var strAssetId=document.getElementById("embedAssetId").value;var strEmail=document.getElementById("txtEmail").value;var strPassword=document.getElementById("txtPassword").value;this.loginAndToggleFavorite(strEmail,strPassword,strImageId,strAssetId);},hideLogin:function(){var objLoginTable=document.getElementById("embedLogin");var objImageId=document.getElementById("embedImageId");var strImageId=objImageId.value;var objButton=document.getElementById("lnkFavorite"+strImageId);objLoginTable.style.display="none";objButton.style.display="inline";},init:function(ciids,aids,multiPostPage){this.callback.service=this;this.callEmbedService("init",{strAssetIdArray:aids,strImageIdArray:ciids,blnMultiPostPage:multiPostPage});},toggleFavorite:function(strImageId){this.callEmbedService("toggleFavorite",{strImageId:strImageId});},toggleFavoriteAsset:function(strAssetId){this.callEmbedService("toggleFavorite",{strAssetId:strAssetId});},loginAndToggleFavorite:function(strEmail,strPassword,strImageId,strAssetId){this.callEmbedService("loginAndToggleFavorite",{strEmail:strEmail,strPassword:strPassword,strImageId:strImageId,strAssetId:strAssetId});this.callEmbedService("loginAndDisplayProfileBox",{strUsername:strEmail,strProfilePassword:strPassword});},loginAndDisplayProfileBox:function(){var strUsername=$('#chz-username').val();var strProfilePassword=$('#chz-password').val();this.callEmbedService("loginAndDisplayProfileBox",{strUsername:strUsername,strProfilePassword:strProfilePassword});},logout:function(){this.callEmbedService("logout",{});},callback:{service:"",suffix:function(strImageId,strAssetId){if(strImageId=="0"&&!strAssetId)return false;if(strAssetId)
return"2_"+strAssetId;return strImageId;},displayLogin:function(strImageId,strAssetId){var suffix=this.suffix(strImageId,strAssetId);var objDiv=document.getElementById("embedFavorite"+suffix);var objLoginTable=document.getElementById("embedLogin");var objButton=document.getElementById("lnkFavorite"+suffix);var objImageId=document.getElementById("embedImageId");var objAssetId=document.getElementById("embedAssetId");if(objDiv){objDiv.appendChild(objLoginTable);objLoginTable.style.display="block";objButton.style.display="none";objImageId.value=strImageId;objAssetId.value=strAssetId;document.getElementById("txtEmail").focus();}},_isLoggedIn:false,displayFavoriteButton:function(strImageId,strLinkText,blnIsLoggedIn){var suffix=this.suffix(strImageId,false);if(!suffix)return;var oldWay=function(){var strHtml='<a id="lnkFavorite'+suffix+'" href="#" data-icon="✚ " onclick="mineEmbedClient.toggleFavorite('+strImageId+
'); return false;" class="orange-button favorite_button" style="width: 130px;">'+strLinkText+'</a>';if(document.getElementById("embedFavorite"+suffix))
document.getElementById("embedFavorite"+suffix).innerHTML=strHtml;};var newWay=function(){this._isLoggedIn=blnIsLoggedIn||this._isLoggedIn;$('#embedFavorite'+suffix).empty();$('<a href="#" data-icon="✚ " class="orange-button favorite_button" style="width: 130px" />')
.attr('id','linkFavorite'+suffix)
.text(strLinkText)
.bind('click',{strImageId:strImageId},function(event){event.preventDefault();if(event.data.blnIsLoggedIn||mineEmbedClient.callback._isLoggedIn)
{mineEmbedClient.toggleFavorite(event.data.strImageId);return;}
$.mine.login.callbacks=[];$.mine.login.callbacks.push(function(){mineEmbedClient.init();mineEmbedClient.callback._isLoggedIn=true;mineEmbedClient.toggleFavorite(event.data.strImageId);});$.mine.login.show('register','','business-card-join-now','favorite-button');})
.appendTo('#embedFavorite'+suffix);};if(arguments.length==2)
oldWay();else
newWay();},displayFavoriteAssetButton:function(assetId,strLinkText,blnIsLoggedIn){var suffix=this.suffix(false,assetId);if(!suffix)return;var oldWay=function(){var strHtml='<a id="lnkFavorite'+suffix+'" href="#" data-icon="✚ " onclick="mineEmbedClient.toggleFavoriteAsset('+assetId+
'); return false;" class="orange-button favorite_button" style="width: 130px;">'+strLinkText+'</a>';if(document.getElementById("embedFavorite"+suffix))
document.getElementById("embedFavorite"+suffix).innerHTML=strHtml;};var newWay=function(){this._isLoggedIn=blnIsLoggedIn||this._isLoggedIn;$('#embedFavorite'+suffix).empty();$('<a href="#" data-icon="✚ " class="orange-button favorite_button" style="width: 130px" />')
.attr('id','linkFavorite'+suffix)
.text(strLinkText)
.bind('click',{assetId:assetId},function(event){event.preventDefault();if(mineEmbedClient.callback._isLoggedIn)
{mineEmbedClient.toggleFavoriteAsset(event.data.assetId);return;}
$.mine.login.callbacks=[];$.mine.login.callbacks.push(function(){mineEmbedClient.init();mineEmbedClient.callback._isLoggedIn=true;mineEmbedClient.toggleFavoriteAsset(event.data.assetId);});$.mine.login.show('register','','business-card-join-now','favorite-button');})
.appendTo('#embedFavorite'+suffix);};if(arguments.length==2)
oldWay();else
newWay();},displayEmail:function(strImageId,strAssetId){var suffix=this.suffix(strImageId,strAssetId);if(!suffix)return;if(document.getElementById("emailShare"+suffix))
{var emailShareElement=document.getElementById("emailShare"+suffix);var siteName=$(emailShareElement).attr("siteName");var siteUrl=$(emailShareElement).attr("siteUrl");var postUrl=$(emailShareElement).attr("postUrl");if(strAssetId)
{var thisId=strAssetId;var thisIdName='aid';}
else
{var thisId=strImageId;var thisIdName='ciid';}
if(typeof(GenerateForm2)=="undefined")
var strHtml=GenerateForm(thisId,thisIdName);else
var strHtml=GenerateForm2(thisId,thisIdName,siteName,siteUrl,postUrl);emailShareElement.innerHTML=strHtml;}},displayNavbarUserLinks:function(blnIsLoggedIn,strProfileUrl){this._isLoggedIn=blnIsLoggedIn||this._isLoggedIn;var strHtml='';if(typeof(strProfileUrl)=='undefined'||strProfileUrl==null){strProfileUrl="profile.aspx";}
if(blnIsLoggedIn){strHtml='<a rel="nofollow" href="'+this.service.siteUrl+strProfileUrl+'">My Profile</a>';strHtml+=' &nbsp; ';strHtml+='<a rel="nofollow" href="#" onclick="mineEmbedClient.logout(); return false;">Log Out</a>';}else{strHtml='<a rel="nofollow" href="'+this.service.siteUrl+'">Register</a>';strHtml+=' &nbsp; ';strHtml+='<a rel="nofollow" href="'+this.service.siteUrl+'mylogin.aspx">Log In</a>';};if(document.getElementById("embedNavbarUserLinks"))
document.getElementById("embedNavbarUserLinks").innerHTML=strHtml;},displayProfileBox:function(blnIsLoggedIn,strUserName,strAvatarUrl,strProfileLinks){this._isLoggedIn=blnIsLoggedIn||this._isLoggedIn;var strHtml='';var strUserNameLink='';if(typeof(strUserName)=='undefined'||strUserName==null){strUserName="My Profile";}else{strUserNameLink=strUserName;};if(blnIsLoggedIn){$('.logged_out_submit').hide();$('#submissionUserName').show();$('#submissionUserName').children('#userNameTd').prepend('<b>'+strUserName+'</b>');var avatarImage='';var userProfileAddress=this.service.siteUrl+strUserNameLink;var profileUrl='<a title="'+strUserName+'" class="profileLink" href="'+userProfileAddress+'">';if(strAvatarUrl=='0'){avatarImage='<div class="g_sprite1 profile_no_avatar"></div>';}else{avatarImage='<div><img class="g_sprite1 profile_avatar" src="'+strAvatarUrl+'" /></div>';}
strHtml=profileUrl+'<div class="g_sprite1 cheez_loggedin_header"></div></a>';strHtml+='<div class="profileTable"><div class="avatar_holder">'+profileUrl+avatarImage+'</a></div>';strHtml+='<div id="profileContentDiv">'+profileUrl+strUserName+'</a><br />'+strProfileLinks+'</div>';strHtml+='<a class="profileLogout" rel="nofollow" href="#" onclick="mineEmbedClient.logout(); return false;">Logout</a>';strEmailAddress=undefined;}else{$('#submissionUserName').hide();$('.logged_out_submit').show();strHtml='<span id="cheezLoginHeader" class="g_sprite1 cheez_login_header"></span>';strHtml+='<div class="profileTable"><div class="cheez_login_row"><span class="g_sprite1 profile_default"></span>';strHtml+='<div class="profile_inputs"><input class="default-value" type="text" id="chz-username" value="Email" name="chz-username" />';strHtml+='<br /><input id="password-clear" type="text" value="Password" autocomplete="off" />';strHtml+='<input id="chz-password" type="password" name="password" value="" autocomplete="off" /></div></div>';strHtml+='<div class="cheez_login_row"><a href="'+this.service.siteUrl+'"><span onmouseout="this.className=\'g_sprite1 join_now\'" ';strHtml+=' onmouseover="this.className=\'g_sprite1 join_now_over\'" class="g_sprite1 join_now"></span></a>';strHtml+='<a id="#profileLoginButton" href="#" rel="nofollow" onclick="mineEmbedClient.loginAndDisplayProfileBox(); return false;">';strHtml+='<span onmouseout="this.className=\'g_sprite1 login_button\'" onmouseover="this.className=\'g_sprite1 login_button_over\'" ';strHtml+=' class="g_sprite1 login_button"></span></a></div></div>';strHtml+='<a rel="nofollow" class="forgotpwd" href="'+this.service.siteUrl+'forgot.aspx" target="new">Forgot Password?</a>';};if(document.getElementById("embedProfileBox"))
$('#embedProfileBox').hide().html(strHtml).fadeIn('slow');$('#embedProfileBox span.join_now').parent('a[href]').click(function(event){event.preventDefault();$.mine.login.callbacks=[];$.mine.login.callbacks.push(function(){mineEmbedClient.init();});$.mine.login.show('register','','business-card-join-now','business-card-join-now');});},displayAffinity:function(){},refresh:function(){window.location.reloaddisabled(true);},loginError:function(strError,typeOfLogin){if(typeOfLogin=='profile'){$('#chz-password').select();$('#cheezLoginHeader').removeClass().addClass('g_sprite1 profile_login_error');$('#cheezLoginHeader').html('<span></span>');$('#cheezLoginHeader span').html('Login FAIL! Try Again...').hide().fadeIn();}else{var objErrorMessage=document.getElementById("embedError");objErrorMessage.innerHTML=strError;}}}};})(jQuery);