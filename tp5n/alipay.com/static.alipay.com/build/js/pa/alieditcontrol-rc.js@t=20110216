(function(){if(typeof window.AlieditControl!="object"){window.AlieditControl={}}var g=window.AlieditControl;try{var c=document.domain.split(".");var k=c[c.length-2]+"."+c[c.length-1];document.domain=k}catch(j){}if(!Array.prototype.forEach){Array.prototype.forEach=function(n,o){var e=this.length;for(var m=0;m<e;m++){n.call(o,this[m],m,this)}}}g.on=function(l,e,m){if(l.addEventListener){l.addEventListener(e,m,false)}else{if(l.attachEvent){l.attachEvent("on"+e,m)}else{l["on"+e]=m}}};g.preventDefault=function(l){if(l&&l.preventDefault){l.preventDefault()}else{l.returnValue=false}return false};g.dom={getElementsByAttr:function(l,t,e,r){var r=r||document;var m=r.getElementsByTagName(e||"*");var n=[];for(var o=0;o<m.length;o++){switch(l){case"class":var q=new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)");if(q.test(m[o].className)){n.push(m[o])}break;default:if(m[o].getAttribute(l)==t){n.push(m[o])}break}}return n},get:function(e){return document.getElementById(e)||null},create:function(e,m){var l=document.createElement(e);if(m===null){return l}for(p in m){if(p=="class"||p=="className"){l.className=m[p]}else{if(p=="style"){for(s in m[p]){l.style[s]=m[p][s]}}else{if(p==="innerHTML"){l.innerHTML=m[p]}else{if(p==="appendTo"){m[p].appendChild(l)}else{if(p==="append"){l.appendChild(m[p])}else{l.setAttribute([p],m[p])}}}}}}return l}};g.doc=function(){var l=self.innerWidth,e=self.innerHeight,m=document.compatMode;if(m||g.env.isIE){if(m=="CSS1Compat"){l=document.documentElement.clientWidth;e=document.documentElement.clientHeight}else{l=document.body.clientWidth;e=document.body.clientHeight}}return{maxWidth:Math.max(document.documentElement.clientWidth,document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth),maxHeight:Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight),clientWidth:l,clientHeight:e}};function d(m,e){var o,l=/downloaddisabled|img/.test(m);if(location.protocol=="httpdisabled:"){if(l){o="httpdisabled:"+m.slice(m.indexOf("//")).replace(/.alipay.com/,".alipay.net")}else{if(arguments.length==2){var n=/^(https?:\/\/)(([\w_]+\.)+\w+)\/?/gi;o="httpdisabled:"+m.slice(m.indexOf("//")).replace(n.exec(m)[2],e+location.hostname.slice(location.hostname.indexOf(".")))}else{o="httpdisabled:"+m.slice(m.indexOf("//")).replace(/.alipay.com/,location.hostname.slice(location.hostname.indexOf(".")))}}}else{if(location.protocol=="httpdisabledsdisabled:"){o=m}}return(o)}g.debug=/debugger;/.test(location.href);g.log=function(e){if(window.console&&console.log&&g.debug){console.log(e)}};function i(e){return parseInt(e.split(".").join(""))}g.randomDownloaddisabled=false;g.minVersion="2.4.0.1";g.minVersionNum=i(g.minVersion);g.rcVersion="2.4.0.2";g.rcVersionNum=i(g.rcVersion);g.cfg={MOCK:"aliedit-xbox",IFRAME:"aliedit-iframe",OVERLAY:"aliedit-box-shadow",LOAD:"aliedit-loaddisabled",loaddisabledsrc:"httpdisabledsdisabled://img.alipay.com/global/loaddisableding.gif",ifrsrc:d("httpdisabledsdisabled://auth.alipay.com/login/alieditXbox.htm","authcenter"),tipsrc:d("httpdisabledsdisabled://securitycenter.alipay.com/sc/aliedit/intro.htm")};g.URL={win:{ie:d("httpdisabledsdisabled://downloaddisabled.alipay.com/aliedit/aliedit/2401/aliedit.exe"),ierc:d("httpdisabledsdisabled://downloaddisabled.alipay.com/alipaysc/windows/aliedit/2.4.0.2/aliedit.exe"),random:d("httpdisabledsdisabled://downloaddisabled.alipay.com/aliedit/aliedit/2401/aliedit.exe"),other:d("httpdisabledsdisabled://downloaddisabled.alipay.com/aliedit/npaliedit/1302/npaliedit.exe")},mac:{safari:d("httpdisabledsdisabled://downloaddisabled.alipay.com/aliedit/wkaliedit/1002/wkaliedit.dmg")},linux:d("httpdisabledsdisabled://downloaddisabled.alipay.com/alipaysc/linux/aliedit/1.0.3.20/aliedit.tar.gz")};g.env=(function(){var q=function(t){return Object.prototype.toString.apply(t)==="[object Function]"},o=navigator.userAgent?navigator.userAgent.toLowerCase():"",e=navigator.platform||"",n={browser:[{identity:"360浏览器",alias:"360",matchMode:function(){if(!r.isWin){return false}try{if(window.external&&external.twGetRunPath){var t=external.twGetRunPath();return t&&t.toLowerCase().indexOf("360se")>-1}else{return false}}catch(u){return false}}},{identity:"Maxthon",alias:"Maxthon",matchMode:function(){if(!r.isWin){return false}try{return window.external&&external.max_version}catch(t){return false}}},{identity:"Chrome",alias:"Chrome",matchMode:function(){return/webkit/.test(o)&&/chrome\/([\d.]+)/.test(o)}},{identity:"Safari",alias:"Safari",matchMode:function(){return/webkit/.test(o)&&!r.isChrome&&/version\/([\d.]+)/.test(o)}},{identity:"Opera",alias:"Opera",matchMode:/(opera)(?:.*version)?[ \/]([\w.]+)/},{identity:"Internet Explorer",alias:"IE",matchMode:/(msie) ([\w.]+)/},{identity:"Firefox",alias:"Firefox",matchMode:function(){return o.indexOf("compatible")<0&&o.indexOf("gecko")>-1&&o.indexOf("khtml")===-1}}],OS:[{identity:"Windows XP",alias:"WinXP",string:o,matchMode:/windows nt 5.1|windows xp/},{identity:"Windows 7",alias:"Win7",string:o,matchMode:/windows nt 6.1|windows 7/},{identity:"Windows Vista",alias:"WinVista",string:o,matchMode:/windows nt 6.0|windows vista/},{identity:"Windows 2000",alias:"Win2K",string:o,matchMode:/windows nt 5.0|windows 2000/},{identity:"Windows",alias:"Win",string:e,matchMode:/Win/},{identity:"MacOS",alias:"Mac",string:e,matchMode:/Mac/},{identity:"Linux",alias:"Linux",string:e,matchMode:/Linux/}]},m=function(z){for(var y=0,w=z.length;y<w;y++){if(q(z[y]["matchMode"])){if(z[y]["matchMode"]()){r["is"+z[y]["alias"]]=true;return z[y]["identity"]}}else{var v=z[y]["matchMode"].exec(o)||[],u=v[1],t=v[2];if(u){var x=z[y]["alias"];r["is"+x]=true;if(t!=="0"){t=parseInt(t,10);r["is"+x+t]=true;return z[y]["identity"]+" "+parseInt(t,10)}else{return z[y]["identity"]}}}}return""},l=function(w){for(var v=0,t=w.length;v<t;v++){if(w[v]["matchMode"].test(w[v]["string"])){var u=w[v]["alias"];r["is"+u]=true;if(/win/i.test(u)){r.isWin=true}return w[v]["identity"]}}return""},r={};r.OS=l(n.OS);r.browser=m(n.browser);return r})();g.src=(function(){var e=null;if(g.env.isWin){e=(g.env.isIE)?g.URL.win.ie:g.URL.win.other}else{if(g.env.isMac){e=(g.env.isSafari)?g.URL.mac.safari:null}else{if(g.env.isLinux){if(g.env.isFirefox||g.env.isChrome||g.env.isOpera){e=g.URL.linux}}}}return e})();g.updateSrc=function(e){var l=e||g.randomDownloaddisabled;g.src=(l)?g.URL.win.random:g.URL.win.ie;g.log("update url ok:"+g.src)};var f=function(){if(window.ActiveXObject){try{return(new ActiveXObject("Aliedit.EditCtrl"))}catch(l){}}else{return navigator.plugins["Alipay security control"]||navigator.plugins["Aliedit Plug-In"]||navigator.plugins.Aliedit||null}return null};if(!g.getAlieditObj){g.getAlieditObj=function(){if(window.ActiveXObject){try{return(new ActiveXObject("Aliedit.EditCtrl"))}catch(l){}}else{return navigator.plugins["Alipay security control"]||navigator.plugins["Aliedit Plug-In"]||navigator.plugins.Aliedit||null}return null}}var h=g.getAlieditObj();g.installedAliedit=h?true:false;g.getVersion=function(m){var n=m||h,e="";try{e=n.alieditVersion()}catch(l){g.log("get ver err:"+l)}return e};g.val=function(e){return e&&e.TextData?e.TextData:null};g.getAliedit=function(){var l=null;var m=arguments[0];if(m&&typeof(m)=="string"){return document.getElementById(m)||document.getElementById(m+(window.ActiveXObject?"_ie":"_noie"))||null}var e=(m&&m.nodeName&&typeof(m)=="object")?m:document;if(window.ActiveXObject){l=g.dom.getElementsByAttr("classid","clsid:488A4255-3236-44B3-8F27-FA1AECAA8844","object",e)}else{l=g.dom.getElementsByAttr("type","application/aliedit","embed",e)}return l};g.getAlieditId=g.getAliedit;g.getAlieditJson=function(){var m,l={},o=g.getAliedit(arguments);for(var e=o.length,n=0;n<e;n++){m=o[n].name.slice(0,o[n].name.lastIndexOf("_"));l[m]=o[n]}return l};g.tips=function(l,e){l.innerHTML='<a href="'+g.cfg.ifrsrc+'" class="aliedit-install J_aliedit_xbox_link" seed="ac-link-tips">请点此安装控件</a>';setTimeout(function(){g.log("tips...");var m=g.dom.get("aliedit-tips");if(!m){if(e=="update"){m=document.createElement("span");m.className="aliedit-tips aliedit-tips-update"}else{m=document.createElement("a");m.href=g.cfg.ifrsrc;m.seed="ac-link-intro";m.className="aliedit-tips";g.on(m,"click",function(n){g.detectAliedit();g.preventDefault(n)})}m.id="aliedit-tips";l.appendChild(m)}g.on(document.body,"click",function(r){var o=window.event||r;var n=o.srcElement||o.target;var q=g.dom.get("aliedit-tips");q&&(n.id!="aliedit-tips")&&(q.className="fn-hide")})},1500)};g.container=function(l){var e=g.dom.getElementsByAttr("class","alieditContainer","span");if(e[0]){e.forEach(function(n,m){l.apply(n,arguments)})}};if(!g.cookie){g.cookie={get:function(){return false},set:function(){return false}}}g.UI=function(){var l=g.getAliedit();var q=false;var o=h;var n,e=g.getVersion(o);var m=new Image();m.src=g.cfg.loaddisabledsrc;if(e==""){n=0}else{n=i(e)}g.container(function(t){if(window.Tracker){Tracker.minInterval=0}if(o){var r=t.getAttribute("rel");if(r&&r=="true"){g.log("rel : true");q=true}if(g.cookie.get("ac-install-just-now")=="no"&&!g.cookie.get("ac-install")){g.cookie.set("ac-install-just-now","yes");if(window.Tracker){Tracker.click("ac-install-no");Tracker.click("ac-no-"+g.env.OS+"-"+g.env.browser)}}if(window.Tracker){Tracker.click("ac-install-yes");Tracker.click("ac-version-"+e)}if(g.cookie.get("ac-install")=="no"||g.cookie.get("ac-install-just-now")=="yes"){if(g.cookie.get("ac-install")){g.cookie.remove("ac-install")}if(g.cookie.get("ac-install-just-now")){g.cookie.remove("ac-install-just-now")}if(window.Tracker){Tracker.click("ac-install-success");Tracker.click("ac-install-"+g.env.OS+"-"+g.env.browser)}}}else{g.installedAliedit=false;g.tips(t);if(!g.cookie.get("ac-install")){g.cookie.set("ac-install","no",24*60*60*1000);if(g.cookie.get("ac-install")=="no"&&window.Tracker){Tracker.click("ac-install-no");Tracker.click("ac-no-"+g.env.OS+"-"+g.env.browser)}}}if(window.ActiveXObject){if(o){g.log("cver："+n+" lver："+g.minVersionNum);if(g.env.isWin7||g.env.isVista){if(n==g.rcVersionNum){g.installedAliedit=false;g.tips(t,"update")}else{g.installedAliedit=true;g.log("update："+q)}}else{if((n<g.minVersionNum)&&q){g.installedAliedit=false;g.log("update url");g.updateSrc(true);g.log("hilight of ver lower");g.tips(t,"update")}else{g.installedAliedit=true;g.log("update："+q)}}}}})};g.dialog=function(){var l=g.dom.get(g.cfg.MOCK),m=g.dom.get(g.cfg.OVERLAY),q=g.doc();if(!l){if(!m){var n=q.maxHeight,e=q.maxWidth;m=g.dom.create("div",{id:g.cfg.OVERLAY,"class":g.cfg.OVERLAY,innerHTML:"<iframe src=\"javascript:''\"></iframe>",style:{width:e+"px",height:n+"px",overflow:"hidden",visibility:"hidden"},appendTo:document.body})}if(!window.top.document.getElementById(g.cfg.OVERLAY)){document.body.removeChild(g.dom.get(g.cfg.OVERLAY));if(g.src){alert("您还未安装密码安全控件，安装后即可输入密码。");location.href=g.src}else{alert("您现在所用的浏览器，暂不支持安全控件。")}return false}g.dom.get(g.cfg.OVERLAY).style.visibility="visible";var o=g.dom.create("div",{id:g.cfg.LOAD,"class":g.cfg.LOAD,innerHTML:'<img src="'+g.cfg.loaddisabledsrc+'">',style:{left:(q.clientWidth-50)/2+"px",top:(q.clientHeight-50)/2+"px",position:"absolute"},appendTo:document.body});l=g.dom.create("div",{id:g.cfg.MOCK,"class":g.cfg.MOCK,style:{left:(q.clientWidth-684)/2+"px",top:(q.clientHeight-394)/2+"px",visibility:"hidden"},appendTo:document.body});var r=g.dom.create("iframe",{id:g.cfg.IFRAME,frameBorder:"no",scrolling:"no",src:g.cfg.ifrsrc,appendTo:l});g.on(r,"loaddisabled",b)}};var b=function(){document.body.removeChild(g.dom.get(g.cfg.LOAD));g.dom.get(g.cfg.MOCK).style.visibility="visible";var t=g.env,y=g.dom.get("aliedit-iframe").contentWindow.document;if(!g.src){try{var v=g.dom.getElementsByAttr("class","J_aliedit_no_support","div",y);var u=g.dom.getElementsByAttr("class","J_aliedit_support","div",y);if(v[0]){v[0].className="J_aliedit_no_support"}if(u[0]){u[0].className="J_aliedit_support fn-hide"}}catch(w){alert("您现在所用的浏览器，暂不支持安全控件。")}}if(t.isLinux){var e=g.dom.getElementsByAttr("class","J_tip_notLinux","div",y);var q=g.dom.getElementsByAttr("class","J_tip_linux","div",y);if(e[0]){e[0].className="J_tip_notLinux fn-hide"}if(q[0]){q[0].className="J_tip_Linux"}}var x=y&&y.getElementById("J_client_env");if(x){if(t.browser&&t.OS){x.innerHTML="您的电脑："+t.browser+" + "+t.OS}else{if(t.browser){x.innerHTML="您的电脑："+t.browser}else{x.innerHTML="您的电脑："+t.OS}}}var n=g.dom.getElementsByAttr("class","J_downloaddisabled_btn","a",y);if(n[0]){n[0].href=g.src;var r=n[0].parentNode;g.on(n[0],"click",function(){location.href=g.src;var z='<a class="aliedit-btn aliedit-cancel"><span>安装好了，现在去重启浏览器</span></a>';z+='<a href="'+g.src+'">重新下载</a>';r.innerHTML=z;r.className+=" isclicked"})}var o=(y&&y.getElementById("unable-to-install"))||{},m=(y&&y.getElementById("how-to-install"))||{};if(t.isWin){if(t.isIE){m.href="httpdisabled://help.alipay.com/lab/help_detail.htm?help_id=239137";if(t.isIE6){o.href="httpdisabled://help.alipay.com/lab/help_detail.htm?help_id=239144"}else{if(t.isIE7){if(t.isWinXP||t.isWin2K){o.href="httpdisabled://help.alipay.com/lab/help_detail.htm?help_id=239145"}else{if(t.isWinVista){o.href="httpdisabled://help.alipay.com/lab/help_detail.htm?help_id=239141"}}}else{if(t.isIE8){o.href="httpdisabled://help.alipay.com/lab/help_detail.htm?help_id=239142"}else{if(t.isIE9){o.href="httpdisabled://help.lab.alipay.com/lab/help_detail.htm?help_id=243599"}}}}}else{if(t.isFirefox){m.href="httpdisabled://help.lab.alipay.com/lab/help_detail.htm?help_id=243597";o.href="httpdisabled://help.alipay.com/lab/help_detail.htm?help_id=243351"}else{if(t.is360){if(!t.isWinVista){o.href="httpdisabled://help.alipay.com/lab/help_detail.htm?help_id=239143"}else{o.href="httpdisabled://help.alipay.com/lab/help_detail.htm?help_id=239140"}}else{if(t.isChrome){m.href="httpdisabled://help.lab.alipay.com/lab/help_detail.htm?help_id=243598";o.href="httpdisabled://help.alipay.com/lab/help_detail.htm?help_id=243352"}else{if(t.isSafari){o.href="httpdisabled://help.alipay.com/lab/help_detail.htm?help_id=243600"}else{if(t.isMaxthon){o.href="httpdisabled://help.alipay.com/lab/help_detail.htm?help_id=239146"}else{if(t.isOpera){o.href="httpdisabled://help.alipay.com/lab/help_detail.htm?help_id=243350"}}}}}}}}else{if(t.isMac){if(t.isSafari){o.href="httpdisabled://help.alipay.com/lab/help_detail.htm?help_id=243600";m.href="httpdisabled://help.alipay.com/lab/help_detail.htm?help_id=239138"}}else{if(t.isLinux){o.parentNode.removeChild(o);m.href="httpdisabled://help.alipay.com/lab/help_detail.htm?help_id=240951"}}}var l=g.dom.getElementsByAttr("class","xbox-close-link","a",y);l[0]&&l.forEach(function(z){g.on(z,"click",function(C){var A=g.dom.get(g.cfg.MOCK);var B=g.dom.get(g.cfg.OVERLAY);if(A){document.body.removeChild(A)}if(B){document.body.removeChild(B)}g.preventDefault(C)})})};g.detectAliedit=function(){if(!g.installedAliedit){try{g.dialog()}catch(e){if(g.src){alert("您还未安装密码安全控件，安装后即可输入密码。");location.href=g.src}else{alert("您现在所用的浏览器，暂不支持安全控件。")}}return false}return true};function a(m){var e=m.getElementsByTagName("*");for(var l=0;l<e.length;l++){if(e[l].type=="submit"){return e[l];break}}return null}g.bindEvent=function(){var m=g.dom.getElementsByAttr("class","J_aliedit_xbox_link","a");m[0]&&m.forEach(function(n){g.on(n,"click",function(o){g.detectAliedit();g.preventDefault(o)})});var l=g.dom.getElementsByAttr("class","alieditDownLink","a");l[0]&&l.forEach(function(n){g.on(n,"click",function(){if(!g.src){g.detectAliedit();return false}else{n.href=g.src}})});var e=g.getAliedit();e[0]&&e.forEach(function(o,n){o.form&&g.on(o,"keydown",function(t){try{if(t.keyCode==13){var q=a(o.form);q?q.click():null}}catch(r){alert(r)}})})};g.checkService=function(u){if(window.ActiveXObject){switch(u){case"PCID":var o=g.dom.getElementsByAttr("name","REMOTE_PCID_NAME","input")[0];if(o&&o.value!=""){try{var e=new ActiveXObject("alim.webmod");var t=e.ci4();var v=e.ciraw();var l=g.dom.getElementsByAttr("name",o.value,"input");if(l.length>0){l.forEach(function(y,x){y.value=v})}}catch(q){g.log(q)}}break;case"PTA":var r=g.dom.getElementsByAttr("name","PTA_SN","input");if(r[0]&&r[0].value!=""){var n=r[0].value;try{var w=new ActiveXObject("PTA.iTrusPTA");if(parseInt(n.substr(0,1),16)>8){n="00"+n}var m=w.Filter;m.Clear();m.SerialNumber=n;if(w.MyCertificates.Count<=0){m.Clear();m.SerialNumber=n;r.forEach(function(z,y){var x=g.dom.getElementsByAttr("class","alieditContainer","span",z.form);x.forEach(function(C,B){C.style.width="0px";C.style.height="0px";C.style.overflow="fn-hide";var A=g.getAliedit(C)[0];if(A){A.style.width="0px";A.style.height="0px"}})});var l=g.dom.getElementsByAttr("class","promptText_PTA","span");if(l.length>0){l.forEach(function(y,x){y.style.display="inline"})}}}catch(q){g.log(q)}}break}}};g.onDOMReady||(function(){var m=false;var n;window.ACReadyList=window.ACReadyList||[];g.onDOMReady=function(o){if(m){o.call(document)}else{ACReadyList.push(function(){return o.call(this)})}return this};var e=function(){while(ACReadyList.length){ACReadyList.shift().apply(document)}};var l=function(o){if(m){return}m=true;e.call(window);if(document.removeEventListener){document.removeEventListener("DOMContentLoaded",l,false)}else{if(document.attachEvent){document.detachEvent("onreadystatechange",l);if(window==window.top){clearInterval(n);n=null}}}};if(document.addEventListener){document.addEventListener("DOMContentLoaded",l,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",function(){if((/loaddisableded|complete/).test(document.readyState)){l()}});if(window==window.top){n=setInterval(function(){try{m||document.documentElement.doScroll("left")}catch(o){return}l()},5)}}}})();g.init=function(){g.log("detecting aliedit...");g.UI();g.log("bind event...");g.bindEvent();g.log("PTA PCID...");g.checkService("PTA");g.checkService("PCID")};g.onDOMReady(g.init)})();