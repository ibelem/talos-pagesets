/*
 RJS_Slideshow 1.0.0

 Date: 2010-11-18
*/
(function(t,j){if(t.jQuery!==j){jQuery.noConflict();var i=jQuery;if(i.RJS_Helpers){var v=function(q,r){var a=this;if(!(q===j||r===j)){a.mainObj=q;i.extend(this,{settings:{maxitem:5,pagespeed:100,opacityspeed:100,autoslidetime:2,autoslideflag:"",autoslide:0,autoresize:0,verticalmode:0},eobj:{itemsDisplay:false,prevButton:false,nextButton:false},canvas:{front:false,back:false,autoPlayTimer:false},itemPrototype:{html:"",height:0,width:0},items:false,itemIndex:[],itemEvents:{remove:false},status:{animation:false,
preparingItems:false,renderReset:false,resizeCurrStart:false,resizeCurrEnd:false,callBackResize:false},pageConf:{maxAllowed:5,currStart:0,currEnd:0,currCnt:0,width:0},events:{onItemRemove:false,afterFirstRender:false,beforeFirstRender:false,onZeroItems:false,onResize:false}},r);i.extend(this,{initialize:function(){var b=0,e,d;if(a.items.length<1||!a.eobj.itemsDisplay||!a.eobj.prevButton||!a.eobj.nextButton)return a;for(e in a.items){a.itemIndex[b]=e;b++}b=a.itemIndex.length;for(d in a.events)!i.isFunction(a.events[d])&&
(a.events[d]=false);if(a.settings.autoslide===1&&!i.isFunction(a[a.settings.autoslideflag]))a.settings.autoslide=0;a.pageConf.maxAllowed=Math.min(a.settings.maxitem,b);if(a.settings.autoresize===1&&a.settings.verticalmode===0&&a.itemPrototype.width>0){a.resize(false);i(t).resize(function(){a.resize(true)})}d=Math.min(a.pageConf.maxAllowed,b);a.prepareItems(0,d).render(0,d,false).manageControls().prepareItems(d,b);return a},prepareItems:function(b,e){var d=a.itemPrototype.html,c=a.itemPrototype.identifiers,
g="",l,f,h;if(a.status.preparingItems)return a;if(a.status.animation){setTimeout(function(){a.prepareItems(b,e)},a.settings.pagespeed);return a}a.status.preparingItems=true;for(f=b;f<e;f++){g=d;l=a.items[a.itemIndex[f]];for(h in c)g=g.replace(c[h][1],l[h]!=j?c[h][0]+l[h]+c[h][2]:"");l.ele=i(g)}if(a.itemEvents.remove!="")for(f=b;f<e;f++)a.items[a.itemIndex[f]].ele.find(a.itemEvents.remove).attr("id","").bind("click",{index:f},function(k){k.preventDefault();a.removeItem(k.data.index);return false});
a.status.preparingItems=false;return a},render:function(b,e,d,c){function g(){function l(m,n,s){if(m=a.items[a.itemIndex[m]])m.ele.animate({opacity:0},a.settings.opacityspeed,"linear");if(n=a.items[a.itemIndex[n]])n.ele.animate({opacity:1},a.settings.opacityspeed,"linear");s||setTimeout(function(){a.canvas.front[0]!==j&&a.canvas.front[0].parentNode!==null&&a.canvas.front[0].parentNode.removeChild(a.canvas.front[0]);a.canvas.front=a.canvas.back;a.play();a.status.animation=false;a.status.renderReset=
false;a.status.callBackResize&&a.resize(true)},a.settings.opacityspeed)}var f=a.pageConf.maxAllowed,h=1,k=e-b,o,p,u=true;if(c){o=a.pageConf.currCnt!=f?Math.ceil(a.pageConf.currEnd/f)*f-1:a.pageConf.currEnd-1;p=k!=f?Math.ceil(e/f)*f-1:e-1;if(a.status.renderReset){o=-1;if(k!=f){f=k;p=e-1}}h=-1}else{o=a.pageConf.currStart;p=b}for(k=0;u;k++,o+=h,p+=h)setTimeout(function(m,n,s){return function(){l(m,n,s)}}(o,p,u=k+1<f),k*a.settings.pagespeed)}if(a.status.animation||a.status.preparingItems)return a;d=typeof d!==
j?d===false?false:true:true;c=typeof c!==j?c===true?true:false:false;if(b<0)return a;a.status.animation=true;a.stop();if(e>a.itemIndex.length){e=a.itemIndex.length;if(e-b>a.pageConf.maxAllowed)return a}if(d===false){a.canvas.front=a.prepareElements(b,e,2,1);a.events.beforeFirstRender&&a.events.beforeFirstRender(a.pageConf.maxAllowed,a.mainObj);a.eobj.itemsDisplay.append(a.canvas.front);a.play();a.status.animation=false;a.events.afterFirstRender&&a.events.afterFirstRender(a.pageConf.maxAllowed,a.mainObj)}else{a.status.renderReset&&
a.canvas.front[0].parentNode.removeChild(a.canvas.front[0]);a.canvas.back=a.prepareElements(b,e,2,0);a.eobj.itemsDisplay.append(a.canvas.back);g()}a.pageConf.currStart=b;a.pageConf.currEnd=e;a.pageConf.currCnt=e-b;a.manageControls();return a},prepareElements:function(b,e,d,c){d={"z-index":d,opacity:c,position:"relative"};var g;c=i("<div>").css({position:"absolute",width:"100%","float":"none"});for(g=b;g<e;g++){b=a.items[a.itemIndex[g]].ele;c.append(b.css(d))}a.justifyElements(c);return c},manageControls:function(){if(a.pageConf.currStart===
0&&a.pageConf.currEnd>=a.itemIndex.length){a.eobj.prevButton.find("a").hide();a.eobj.nextButton.find("a").hide()}else{a.eobj.prevButton.find("a").show().focus(function(){this.blur()}).click(function(b){b.preventDefault();a.prev();return false});a.eobj.nextButton.find("a").show().focus(function(){this.blur()}).click(function(b){b.preventDefault();a.next();return false})}return a},prev:function(){if(a.pageConf.currStart===0&&a.pageConf.currEnd===a.itemIndex.length)return a;a.pageConf.currStart===0?
a.render(Math.floor((a.itemIndex.length-1)/a.pageConf.maxAllowed)*a.pageConf.maxAllowed,a.itemIndex.length):a.render(a.pageConf.currStart-a.pageConf.maxAllowed,a.pageConf.currStart);return a},next:function(){if(a.pageConf.currStart===0&&a.pageConf.currEnd===a.itemIndex.length)return a;a.pageConf.currEnd>=a.itemIndex.length?a.render(0,a.pageConf.maxAllowed,true,true):a.render(a.pageConf.currEnd,a.pageConf.currEnd+a.pageConf.maxAllowed,true,true);return a},removeItem:function(b){var e=a.canvas.front,
d,c,g;d=false;var l;if(a.status.animation||a.status.preparingItems)return false;a.items[b].ele.fadeOut(a.settings.opacityspeed,function(){i(this).remove()});a.events.onItemRemove&&a.events.onItemRemove(b,a.mainObj);if(a.itemIndex.length==1){a.events.onZeroItems&&a.events.onZeroItems(a.mainObj);return false}b=i.inArray(b+"",a.itemIndex);if(b==-1)return false;a.itemIndex.splice(b,1);if(a.pageConf.currEnd==a.itemIndex.length+1){a.pageConf.currEnd--;a.pageConf.currCnt--}if(b==a.itemIndex.length)b%a.pageConf.maxAllowed==
0&&a.prev();else{a.status.animation=true;c=b;for(g=0;!d;c++,g++){d=a.items[a.itemIndex[c]].ele;d.css({"z-index":1,opacity:0});if(l=c==a.pageConf.currEnd-1){e.append(d);if(c==b)g=1}setTimeout(function(f,h){return function(){f.animate({opacity:"1"},a.settings.opacityspeed,"linear",function(){a.status.animation=h;!a.status.animation&&a.status.callBackResize&&a.resize(true)})}}(d,!(d=c===a.itemIndex.length-1||l)),g*a.settings.pagespeed)}}a.justifyElements().manageControls();return false},play:function(){if(a.settings.autoslide===
0)return a;a.autoPlayTimer=setTimeout(function(){a[a.settings.autoslideflag]()},a.settings.autoslidetime);return a},stop:function(){if(a.settings.autoslide===0)return a;clearTimeout(a.autoPlayTimer);a.autoPlayTimer=false;return a},justifyElements:function(b){var e=a.pageConf.maxAllowed;if(a.settings.autoresize!==1)return a;if(b===j)b=a.canvas.front;b.children("*").css("width",e>=a.settings.maxitem?Math.floor(99/e*1E4)/1E4+"%":"");return a},resize:function(b){var e=a.pageConf,d,c;if(a.status.animation||
a.status.preparingItems){a.status.callBackResize=true;return a}d=a.eobj.itemsDisplay.width();c=Math.floor(d/a.itemPrototype.width);if(c<a.settings.maxitem)c=a.settings.maxitem;if(c==e.maxAllowed)return a;d=e.maxAllowed;e.maxAllowed=c;if(!b)return a;a.status.animation=true;a.stop();if(a.status.renderReset){b=a.status.resizeCurrStart;c=a.status.resizeCurrEnd}else{b=e.currStart;c=e.currEnd}cntItem=c-b;if(e.maxAllowed>d){if(c!=a.itemIndex.length){frontEle=a.canvas.front;for(d=cntItem;d<e.maxAllowed;d++){c=
b+d;if(c>=a.itemIndex.length)break;if(a.itemIndex[c]===j)break;c=a.items[a.itemIndex[c]].ele;c.css("z-index",2).animate({opacity:1},0);frontEle.append(c)}c=b+d}}else if(cntItem>e.maxAllowed){for(d=cntItem;d>e.maxAllowed;d--){c=b+d-1;if(a.itemIndex[c]===j)break;c=a.items[a.itemIndex[c]].ele;c[0].parentNode&&c[0].parentNode.removeChild(c[0])}c=b+d}a.status.resizeCurrStart=b;a.status.resizeCurrEnd=c;e.currCnt=c-b;a.status.renderReset=true;a.justifyElements();d=b%e.maxAllowed;if(d!=0)b+=e.maxAllowed-
d;c=b+e.maxAllowed;if(c>a.itemIndex.length)c=a.itemIndex.length;e.currStart=b;e.currEnd=c;a.manageControls();a.events.onResize&&a.events.onResize(e.maxAllowed,a.mainObj);a.status.animation=a.status.callBackResize=false;a.play();return a}});a.initialize()}};i.fn.RJS_Slideshow=function(q,r){this.each(function(){new v(q,r)})}}}})(this);
