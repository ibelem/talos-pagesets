document.domain="xunlei.com";var isIE=navigator.appName.indexOf("Microsoft")!=-1;
if(window.Event&&!isIE){var SearchEvent=function(){for(var a=SearchEvent.caller;a!=null;){var b=a.arguments[0];if(b)if(String(b.constructor).indexOf("Event")>-1)return b;a=a.caller}return null};window.constructor.prototype.__defineGetter__("event",function(){return SearchEvent()});Event.prototype.__defineSetter__("returnValue",function(a){a||this.preventDefault();return a});Event.prototype.__defineSetter__("cancelBubble",function(a){a&&this.stopPropagation();return a});Event.prototype.__defineGetter__("clientX",
function(){return this.pageX});Event.prototype.__defineGetter__("clientY",function(){return this.pageY});Event.prototype.__defineGetter__("keyCode",function(){return this.which});Event.prototype.__defineGetter__("button",function(){return this.which});Event.prototype.__defineGetter__("srcElement",function(){for(var a=this.target;a.nodeType!=1;)a=a.parentNode;return a});Event.prototype.__defineGetter__("offsetX",function(){return this.layerX});Event.prototype.__defineGetter__("offsetY",function(){return this.layerY});
Event.prototype.attachEvent=function(a,b){this.addEventListener(a.substring(2),b,true)};Event.prototype.detachEvent=function(a,b){this.removeEventListener(a.substring(2),b,true)};window.constructor.prototype.attachEvent=function(a,b){this.addEventListener(a.substring(2),b,true)};window.constructor.prototype.detachEvent=function(a,b){this.removeEventListener(a.substring(2),b,true)};document.constructor.prototype.attachEvent=function(a,b){this.addEventListener(a.substring(2),b,true)};document.constructor.prototype.detachEvent=
function(a,b){this.removeEventListener(a.substring(2),b,true)};Element.prototype.attachEvent=function(a,b){this.addEventListener(a.substring(2),b,true)};Element.prototype.detachEvent=function(a,b){this.removeEventListener(a.substring(2),b,true)};HTMLElement.prototype.attachEvent=function(a,b){this.addEventListener(a.substring(2),b,true)};HTMLElement.prototype.detachEvent=function(a,b){this.removeEventListener(a.substring(2),b,true)}}String.prototype.trim=function(){return this.replace(/\s+/gm,"")};
String.prototype.lTrim=function(){return this.replace(/^\s+/gm,"")};String.prototype.rTrim=function(){return this.replace(/\s+$/gm,"")};String.prototype.size=function(){return this.replace(/[^\u0000-\u00FF]/gmi,"**").length};function $(a){return document.getElementById(a)}function $C(a){return document.createElement(a)}function $P(a,b){return b?b.appendChild(a):document.body.appendChild(a)}function $R(a,b){return b?b.removeChild(a):document.body.removeChild(a)}
function loaddisabledAD(){for(var a=arguments,b=a.length,c=[],e=null,d=0;d<b;d++){e=a[d].split("|");if(e.length==3){var f=parseInt(e[2],10);parseInt(getCookie("RMTimes"+e[1])||0,10)<f&&c.push(e[0])}else c.push(a[d])}loaddisabledJSData("httpdisabled://misc.web.xunlei.com/www_5_2/js/banner_kankan.1.7.js","fetchAD",c,false)}
function loaddisabledJSData(a,b,c,e){var d=document.getElementsByTagName("head")[0],f=$C("script"),g="dynamic_script_"+(new Date).getTime()+"_"+Math.random(),h=undefined!==f.onreadystatechange&&undefined!==f.readyState?"onreadystatechange":"onloaddisabled";f.language="javascript";f.type="text/javascript";f.src=a;f.id=g;f.attachEvent(h,function(){var i=f.readyState||"loaddisableded";if("loaddisableded"==i||"complete"==i){if(typeof b=="string")setTimeout(function(){try{eval(b).apply(null,c)}catch(j){}},50);else typeof b=="function"&&
setTimeout(function(){try{b.apply(null,c)}catch(j){}},50);e&&$R(f,d);f=d=null}});$P(f,d)}
function RichMedia(a,b,c,e,d,f,g){this.id=a||0;this.bigId="L_XL_RICHMEDIA_"+this.id;this.smallId="S_XL_RICHMEDIA_"+this.id;this.bigMediaId=b;this.bigMediaWidth=e||580;this.bigMediaHeight=d||342;this.smallMediaId=c;this.smallMediaWidth=f||25;this.smallMediaHeight=g||159;this.isShowSmall=this.isShowBig=false;this.closeTimerId=this.keepTimerId=null;this.stay=12E3;this.times=-1;this.stat=new Image(1,1);this.html_buff=""}RichMedia.prototype.$E=function(a){return document.getElementById(a)};
RichMedia.prototype.$T=function(a){return document.getElementsByTagName(a)};RichMedia.prototype.$C=function(a){return document.createElement(a)};RichMedia.prototype.$X=function(a){return document.createTextNode(a)};RichMedia.prototype.$A=function(a,b){return(b||document.body||document.documentElement).appendChild(a)};RichMedia.prototype.$D=function(a,b){return(b||document.body||document.documentElement).removeChild(a)};
RichMedia.prototype.$R=function(a,b){var c=b.parentNode;if(null!=c)return c.replaceChild(a,b);return null};RichMedia.prototype.$I=function(a,b){var c=b.parentNode;if(null!=c)return c.insertBefore(a,b);return null};
RichMedia.prototype.getBrowserInfo=function(){var a=navigator.userAgent.toLowerCase(),b=null;return(b=a.match(/msie ([\d.]+)/))?{browser:"MSIE",version:b[1]}:(b=a.match(/firefox\/([\d.]+)/))?{browser:"FireFox",version:b[1]}:(b=a.match(/opera.([\d.]+)/))?{browser:"Opera",version:b[1]}:(b=a.match(/version\/([\d.]+).*safari/))?{browser:"Safari",version:b[1]}:(b=a.match(/chrome\/([\d.]+)/))?{browser:"Chrome",version:b[1]}:{browser:"Unknown",version:0}};
RichMedia.prototype.getOuterStyle=function(a,b){var c=document.styleSheets,e=c.length,d=null;d=null;for(var f=0,g=null,h=0;h<e;h++){d=c.item(h);d=d.rules||d.cssRules;f=d.length;for(var i=0;i<f;i++){g=d[i];if(a==g.selectorText)return g.style[b]}}return null};
RichMedia.prototype.dynamicStyle=function(a){var b=this.$C("style"),c="dynamic_style_"+this.getTimeStamp();b.type="text/css";b.rel="stylesheet";b.setAttribute("id",c);this.$A(b,this.$T("head")[0]);if("MSIE"==this.getBrowserInfo().browser)b.styleSheet.cssText=a.join("");else for(c=0;c<a.length;c++)b.sheet.insertRule(a[c],c)};RichMedia.prototype.getTimeStamp=function(){return(new Date).getTime()};
RichMedia.prototype.getDocumentSize=function(){var a=document.documentElement||document.body;return{width:a.scrollWidth,height:a.scrollHeight}};RichMedia.prototype.getViewportSize=function(){var a=document.documentElement||document.body;return{width:window.innerWidth||a.clientWidth,height:window.innerHeight||a.clientHeight}};RichMedia.prototype.getScrollPosition=function(){var a=document.documentElement||document.body;return{left:window.pageXOffset||a.scrollLeft,top:window.pageYOffset||a.scrollTop}};
RichMedia.prototype.getScreenSize=function(){return{width:window.screen.width,height:window.screen.height,offsetTop:window.screenTop||window.screenX,offsetLeft:window.screenLeft||window.screenY}};RichMedia.prototype.clearCloseTimer=function(){if(null!=this.closeTimerId){clearTimeout(this.closeTimerId);this.closeTimerId=null}};
RichMedia.voidBigMedia=function(){this.clearCloseTimer();this.closeSmallMedia();var a=this;this.$E(this.bigId).style.display="block";this.$E("mediabig").innerHTML=this.html_buff;this.html_buff="";try{this.stay=mediabig_ROLLINGTIME}catch(b){this.stay=12E3}if(this.stay>0)this.closeTimerId=setTimeout(function(){a.closeBigMedia()},a.stay)};
RichMedia.prototype.closeBigMedia=function(){this.clearCloseTimer();var a=this.$E(this.bigId);this.html_buff=this.$E("mediabig").innerHTML;this.$E("mediabig").innerHTML="";a.style.display="none";if(this.isShowSmall)this.$E(this.smallId).style.display="block"};RichMedia.prototype.closeSmallMedia=function(){this.clearCloseTimer();this.$E(this.smallId).style.display="none"};RichMedia.prototype.replay=function(){voidBigMedia();this.sendPV()};
RichMedia.prototype.keepPosition=function(){var a=this.$E(this.bigId),b=this.$E(this.smallId),c=this.getViewportSize(),e=this.getScrollPosition();e=c.height/2-this.bigMediaHeight/2+e.top+70;a.style.left=c.width/2-this.bigMediaWidth/2-1+"px";a.style.top=e+"px";b.style.top=e+"px"};
RichMedia.prototype.setBigRichMedia=function(){var a=this,b=null,c=this.$E(this.bigId),e=this.bigMediaId+"_insertAdvertHTML",d=0;b=setInterval(function(){if(d>1E3){clearInterval(b);b=null}try{eval(e);c.style.display="block";clearInterval(b);b=null;a.recordShowTimes(a.getShowTimes()+1);a.keepTimerId=setInterval(function(){a.keepPosition()},100);try{a.stay=mediabig_ROLLINGTIME}catch(f){a.stay=12E3}if(a.stay>0)a.closeTimerId=setTimeout(function(){a.closeBigMedia()},a.stay)}catch(g){d++}},100)};
RichMedia.prototype.setSmallRichMedia=function(){var a=null,b=this.$E(this.smallId),c=this.smallMediaId+"_insertAdvertHTML",e=0;a=setInterval(function(){if(e>1E3){clearInterval(a);a=null}try{eval(c);b.style.display="none";clearInterval(a);a=null}catch(d){e++}},100)};RichMedia.prototype.getCookie=function(a){var b=a+"=";a=document.cookie.indexOf(b);if(a!=-1){a+=b.length;b=document.cookie.indexOf(";",a);if(b==-1)b=document.cookie.length;return decodeURIComponent(document.cookie.substring(a,b))}else return null};
RichMedia.prototype.getOffsetTime=function(){var a=new Date;a=(new Date(a.getFullYear(),a.getMonth(),a.getDate(),23,59,59)).getTime();var b=(new Date).getTime();return((a-b)/36E5).toFixed(2)};RichMedia.prototype.setCookie=function(a,b,c){if(arguments.length>2){var e=new Date((new Date).getTime()+c*36E5);document.cookie=a+"="+encodeURIComponent(b)+"; path=/; domain=xunlei.com; expires="+e.toGMTString()}else document.cookie=a+"="+encodeURIComponent(b)+"; path=/; domain=xunlei.com"};
RichMedia.prototype.recordShowTimes=function(a){this.setCookie("RMTimes"+this.id,a,this.getOffsetTime())};RichMedia.prototype.getShowTimes=function(){return parseInt(this.getCookie("RMTimes"+this.id)||0,10)};RichMedia.prototype.sendPV=function(){var a=Math.floor(Math.random()*10)+1;this.stat.removeAttribute("src");if(1==a)this.stat.src="httpdisabled://mpv.sandai.net/commstat/pv?pvkey=%2Fportal%2Fkankan%2Fmediabig"};
RichMedia.prototype.init=function(a,b,c){var e=this,d=this.getViewportSize(),f=this.getScrollPosition(),g=this.getShowTimes(),h=d.width/2-this.bigMediaWidth/2-80,i=d.height/2-this.bigMediaHeight/2+f.top;d=this.$C("div");f=this.$C("div");var j=this.$C("div"),k=this.$C("div"),n=this.$C("div"),l=this.$C("div"),m=this.$C("div");h=["#"+this.bigId+"{position:absolute; z-index:3000; background-color:transparent; text-align:center; z-index:50; width:"+this.bigMediaWidth+"px; height:"+this.bigMediaHeight+
"px;left:"+h+"px;top:"+i+"px; display:none;}","#"+this.bigId+" .close{float:right; background-color:#ff0000; cursor:pointer; line-height:22px; height:22px; color:#fff; font-weight:bold; text-decoration:underline; width:45px; text-align:center;}","#"+this.smallId+"{display:none; background:transparent url(http://img.kankan.xunlei.com/img/kankan/media/replayMedia.jpg) no-repeat center center; text-align:center; position:absolute; z-index:50; width:"+this.smallMediaWidth+"px; height:"+this.smallMediaHeight+
"px;right:1px;top:"+i+"px;}","#"+this.smallId+" .replay{float:right; background-color:transparent; cursor:pointer; height:"+(this.smallMediaHeight-22)+"px; color:red; font-weight:bold; text-decoration:underline; float:left; width:25px;}","#"+this.smallId+" .close{float:left; background-color:transparent; cursor:pointer; height:22px; color:red; font-weight:bold; text-decoration:underline; float:left; width:25px;}"];j.className="close";l.className="close";m.className="replay";d.setAttribute("id",this.bigId);
f.setAttribute("id",this.bigMediaId);k.setAttribute("id",this.smallId);n.setAttribute("id",this.smallMediaId);l.setAttribute("title","\u5173\u95ed");m.setAttribute("title","\u91cd\u64ad");this.isShowBig=a||false;this.isShowSmall=b||false;this.times=c||1;this.dynamicStyle(h);this.$I(d,document.body.firstChild);this.$I(k,document.body.firstChild);this.$A(j,d);this.$A(f,d);this.$A(n,k);this.$A(m,k);this.$A(l,k);this.$A(this.$X("\u5173 \u95ed"),j);if(window.attachEvent){j.attachEvent("onclick",function(){e.closeBigMedia()});
l.attachEvent("onclick",function(){e.closeSmallMedia()});m.attachEvent("onclick",function(){e.replay()})}else{j.addEventListener("click",function(){e.closeBigMedia()});l.addEventListener("click",function(){e.closeSmallMedia()});m.addEventListener("click",function(){e.replay()})}d.style.zIndex=3E3;if(this.isShowBig&&(g<this.times||this.times<0))this.setBigRichMedia()};