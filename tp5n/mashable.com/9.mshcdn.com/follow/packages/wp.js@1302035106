jQuery(function(f){var e=f("meta[name=csrf-token]").attr("content"),g=f("meta[name=csrf-param]").attr("content");f.fn.extend({triggerAndReturn:function(h,j){var i=new f.Event(h);this.trigger(i,j);return i.result!==false},callRemote:function(){var j=this,l=j.attr("method")||j.attr("data-method")||"GET",i=j.attr("action")||j.attr("href"),h=j.attr("data-type")||"script";if(i===undefined){throw"No URL specified for remote call (action or href must be present)."}else{if(j.triggerAndReturn("ajax:before")){var k=j.is("form")?j.serializeArray():[];f.ajax({url:i,data:k,dataType:h,type:l.toUpperCase(),beforeSend:function(m){j.trigger("ajax:loading",m)},success:function(n,m,o){j.trigger("ajax:success",[n,m,o])},complete:function(m){j.trigger("ajax:complete",m)},error:function(o,m,n){j.trigger("ajax:failure",[o,m,n])}})}j.trigger("ajax:after")}}});f("a[data-confirm],input[data-confirm]").live("click",function(){var h=f(this);if(h.triggerAndReturn("confirm")){if(!confirm(h.attr("data-confirm"))){return false}}});f("form[data-remote]").live("submit",function(h){f(this).callRemote();h.preventDefault()});f("a[data-remote],input[data-remote]").live("click",function(h){f(this).callRemote();h.preventDefault()});f("a[data-method]:not([data-remote])").live("click",function(l){var k=f(this),i=k.attr("href"),m=k.attr("data-method"),j=f('<form method="post" action="'+i+'"></form>'),h='<input name="_method" value="'+m+'" type="hidden" />';if(g!=null&&e!=null){h+='<input name="'+g+'" value="'+e+'" type="hidden" />'}j.hide().append(h).appendTo("body");l.preventDefault();j.submit()});var c="input[data-disable-with]";var d="form[data-remote]:has("+c+")";var b="form:not([data-remote]):has("+c+")";var a=function(){f(this).find(c).each(function(){var h=f(this);h.data("enable-with",h.val()).attr("value",h.attr("data-disable-with")).attr("","")})};f(d).live("ajax:before",a);f(b).live("submit",a);f(d).live("ajax:complete",function(){f(this).find(c).each(function(){var h=f(this);h.removeAttr("").val(h.data("enable-with"))})})});(function(e){var c=null,k=null,b=0,l=0,r=0,s=null,h=null,j=null,a="",p="",g="",i=null,d=null;validMethods={put:true,post:true,"delete":true};e.fn.simpleDialog=function(v){var w=e.extend({},e.fn.simpleDialog.defaults,v);return this.each(function(x,A){if(A._sd){return}A._sd=true;var z=e(A);var y=(z.is("form"))?"submit":"click";A.clickBinding=y;z.bind(y+".simpledialog",function(D){D.preventDefault();s=this;s.opts=w;h=D;t();o();var H=e(this);if(s.opts.title!=""){p=s.opts.title}if(H.is("a")){if(s.opts.useTitleAttr){var F=H.attr("title");if(typeof F!="undefined"&&F!=""){p=F}}var C=H.attr("href");if(C.match(/^#/)){var G=e("#"+H.attr("rel"));if(G.length==0){return false}j=G;a=j.clone().html();j.empty();n(a)}else{if(H.find("img").length>0){if(s.opts.showCaption){g=H.find("img").attr("title")}u(C)}else{var B=H.attr("rel");if(typeof(B)!="undefined"){B=B.toLowerCase()}if(validMethods[B]){q(C,{},B)}else{q(C,{})}}}}else{if(H.is(":submit",":button")){var E=H.parents("form");q(E.attr("action"),E.serialize(),E.attr("method"))}else{if(H.is("form")){q(H.attr("action"),H.serialize(),H.attr("method"))}else{e.simpleDialog.close(D)}}}return false})})};e.fn.simpleDialog.defaults={title:"",useTitleAttr:true,containerId:"sd_container",containerClass:"sd_container",overlayId:"sd_overlay",overlayClass:"sd_overlay",loadingClass:"sd_loading",closeLabelClass:"sd_closelabel",showCloseLabel:true,closeLabel:"Close",opacity:0.6,duration:400,closeDuration:250,easing:"linear",zIndex:1000,width:null,height:null,showCaption:void:null,close:null,closeSelector:".close",ajaxOptions:{},showOverlay:true};e.simpleDialog={close:function(w,v){if(!s){return}if(j!=null){j.html(a)}if(e.isFunction(s.opts.close)){s.opts.close.apply(this,[(typeof w=="undefined")?null:w,s])}if(!v){if(i!=null){i.remove()}e("#"+s.opts.overlayId).animate({opacity:0},s.opts.closeDuration,null,function(){e(this).remove()})}return false}};var t=function(){c=c||e(document);k=k||e(window);b=c.height();l=k.height();r=k.width();p="";g=""};var n=function(A){var v="";if(p!=""){v+='<div class="sd_header">'+p+"</div>"}v+='<div class="sd_content">'+A+"</div>";if(g!=""&&typeof g!="undefined"){v+=' <div class="sd_footer">'+g+"</div>"}var y=e("<div />").addClass(s.opts.containerClass).hide().css({position:"absolute",height:"auto"}).html(v).appendTo(document.body);var x=(s.opts.width)?parseInt(s.opts.width):y.width();var z=(s.opts.height)?parseInt(s.opts.height):y.height();var B=f(x,z);i.removeClass(s.opts.loadingClass).animate({width:x+"px",left:parseInt(B[0])+"px"},s.opts.duration,s.opts.easing,function(){e(this).animate({height:z+"px",top:parseInt(B[1])+"px"},s.opts.duration,s.opts.easing,function(){e(this).css({height:"auto"});y.removeClass(s.opts.containerClass).css({position:"relative"}).appendTo(i).show();i.find(s.opts.closeSelector).bind("click.simpledialog",e.simpleDialog.close);if(s.opts.showCloseLabel){var w='<div id="sd_closelabel" class="'+s.opts.closeLabelClass+'"><a href="#">'+s.opts.closeLabel+"</a></div>";i.append(w);i.find("#sd_closelabel a").bind("click.simpledialog",e.simpleDialog.close)}if(e.isFunction(s.void)){s.void.apply(i,[h,s])}})})};e.simpleDialogManual=function(v){var w=e.extend({},e.fn.simpleDialog.defaults,v);s={opts:w};t();o();p="";if(v.content){n(v.content)}};var q=function(v,w,x){e.ajax(e.extend(s.opts.ajaxOptions||{},{type:(typeof x=="undefined")?"GET":x,url:v,data:w,cache:false,dataType:"html",success:n}))};e.simpleDialogManualAjax=function(w,v,y,z){var x=e.extend({},e.fn.simpleDialog.defaults,w);s={opts:x};t();o();q(v,y,z)};var u=function(v){e(document.body).append('<div id="sd_tmp_image" style="display:none;"><img src="'+v+'" alt="" /></div>');var w=e("#sd_tmp_image");w.find("img").load(function(){var x=w.html();w.remove();n(x)}).error(function(x){e.simpleDialog.close(x);w.remove()})};var m=function(y,C){var B=e(C);var x=B.width();var A=B.height();B.empty().css({width:null,height:null}).removeClass().addClass(s.opts.loadingClass).addClass(s.opts.containerClass);var v=B.width();var z=B.height();var D=f(v,z);B.css({width:x,height:A}).animate({left:D[0]+"px",top:D[1]+"px",width:v+"px",height:z+"px"},s.opts.duration)};var o=function(){e.simpleDialog.close(null,true);if(s.opts.showOverlay){var x=e("#"+s.opts.overlayClass);if(x.length==0){e("<div />").attr("id",s.opts.overlayId).addClass(s.opts.overlayClass).css({position:"absolute",width:r,height:b,opacity:s.opts.opacity,zIndex:s.opts.zIndex}).bind("click.simpledialog",e.simpleDialog.close).appendTo(document.body)}}var z=e("#"+s.opts.containerId);if(z.length==0){i=e("<div />").attr("id",s.opts.containerId).addClass(s.opts.loadingClass).addClass(s.opts.containerClass).hide().appendTo(document.body);var v=i.width();var y=i.height();var A=f(v,y);i.css({position:"absolute",left:A[0]+"px",top:A[1]+"px",width:v+"px",height:y+"px",zIndex:s.opts.zIndex+1000}).show()}else{z.each(m)}};var f=function(v,x){return[(b>l)?r/2-v/2-18:r/2-v/2,c.scrollTop()+l/2-x/2]}})(jQuery);(function(c){var a=c.scrollTo=function(f,e,d){c(window).scrollTo(f,e,d)};a.defaults={axis:"xy",duration:parseFloat(c.fn.jquery)>=1.3?0:1};a.window=function(d){return c(window)._scrollable()};c.fn._scrollable=function(){return this.map(function(){var e=this,d=!e.nodeName||c.inArray(e.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!d){return e}var f=(e.contentWindow||e).document||e.ownerDocument||e;return c.browser.safari||f.compatMode=="BackCompat"?f.body:f.documentElement})};c.fn.scrollTo=function(f,e,d){if(typeof e=="object"){d=e;e=0}if(typeof d=="function"){d={onAfter:d}}if(f=="max"){f=9000000000}d=c.extend({},a.defaults,d);e=e||d.speed||d.duration;d.queue=d.queue&&d.axis.length>1;if(d.queue){e/=2}d.offset=b(d.offset);d.over=b(d.over);return this._scrollable().each(function(){var l=this,j=c(l),k=f,i,g={},m=j.is("html,body");switch(typeof k){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(k)){k=b(k);break}k=c(k,this);case"object":if(k.is||k.style){i=(k=c(k)).offset()}}c.each(d.axis.split(""),function(q,r){var s=r=="x"?"Left":"Top",u=s.toLowerCase(),p="scroll"+s,o=l[p],n=a.max(l,r);if(i){g[p]=i[u]+(m?0:o-j.offset()[u]);if(d.margin){g[p]-=parseInt(k.css("margin"+s))||0;g[p]-=parseInt(k.css("border"+s+"Width"))||0}g[p]+=d.offset[u]||0;if(d.over[u]){g[p]+=k[r=="x"?"width":"height"]()*d.over[u]}}else{var t=k[u];g[p]=t.slice&&t.slice(-1)=="%"?parseFloat(t)/100*n:t}if(/^\d+$/.test(g[p])){g[p]=g[p]<=0?0:Math.min(g[p],n)}if(!q&&d.queue){if(o!=g[p]){h(d.onAfterFirst)}delete g[p]}});h(d.onAfter);function h(n){j.animate(g,e,d.easing,n&&function(){n.call(this,f,d)})}}).end()};a.max=function(j,i){var h=i=="x"?"Width":"Height",e="scroll"+h;if(!c(j).is("html,body")){return j[e]-c(j)[h.toLowerCase()]()}var g="client"+h,f=j.ownerDocument.documentElement,d=j.ownerDocument.body;return Math.max(f[e],d[e])-Math.min(f[g],d[g])};function b(d){return typeof d=="object"?d:{top:d,left:d}}})(jQuery);(function(e){var a=[],d=/^url\(["']?([^"'\)]*)["']?\);?$/i,c=/\.png$/i,b=e.browser.msie&&e.browser.version==6;function f(){e.each(a,function(){this.refresh(true)})}e(window).resize(f);e.Poshytip=function(h,g){this.$elm=e(h);this.opts=e.extend({},e.fn.poshytip.defaults,g);this.$tip=e(['<div class="',this.opts.className,'">','<div class="tip-inner tip-bg-image"></div>','<div class="tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left"></div>',"</div>"].join(""));this.$arrow=this.$tip.find("div.tip-arrow");this.$inner=this.$tip.find("div.tip-inner");this.=false;this.init()};e.Poshytip.prototype={init:function(){a.push(this);this.$elm.data("title.poshytip",this.$elm.attr("title")).data("poshytip",this);switch(this.opts.showOn){case"hover":this.$elm.bind({"mouseenter.poshytip":e.proxy(this.mouseenter,this),"mouseleave.poshytip":e.proxy(this.mouseleave,this)});if(this.opts.alignTo=="cursor"){this.$elm.bind("mousemove.poshytip",e.proxy(this.mousemove,this))}if(this.opts.allowTipHover){this.$tip.hover(e.proxy(this.clearTimeouts,this),e.proxy(this.hide,this))}break;case"focus":this.$elm.bind({"focus.poshytip":e.proxy(this.show,this),"blur.poshytip":e.proxy(this.hide,this)});break}},mouseenter:function(g){if(this.){return true}this.clearTimeouts();this.$elm.attr("title","");this.showTimeout=setTimeout(e.proxy(this.show,this),this.opts.showTimeout)},mouseleave:function(){if(this.){return true}this.clearTimeouts();this.$elm.attr("title",this.$elm.data("title.poshytip"));this.hideTimeout=setTimeout(e.proxy(this.hide,this),this.opts.hideTimeout)},mousemove:function(g){if(this.){return true}this.eventX=g.pageX;this.eventY=g.pageY;if(this.opts.followCursor&&this.$tip.data("active")){this.calcPos();this.$tip.css({left:this.pos.l,top:this.pos.t});if(this.pos.arrow){this.$arrow[0].className="tip-arrow tip-arrow-"+this.pos.arrow}}},show:function(){if(this.||this.$tip.data("active")){return}this.reset();this.update();this.display()},hide:function(){if(this.||!this.$tip.data("active")){return}this.display(true)},reset:function(){this.$tip.queue([]).detach().css("visibility","hidden").data("active",false);this.$inner.find("*").poshytip("hide");if(this.opts.fade){this.$tip.css("opacity",this.opacity)}this.$arrow[0].className="tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left"},update:function(i){if(this.){return}var h=i!==undefined;if(h){if(!this.$tip.data("active")){return}}else{i=this.opts.content}this.$inner.contents().detach();var g=this;this.$inner.append(typeof i=="function"?i.call(this.$elm[0],function(j){g.update(j)}):i=="[title]"?this.$elm.data("title.poshytip"):i);this.refresh(h)},refresh:function(h){if(this.){return}if(h){if(!this.$tip.data("active")){return}var k={left:this.$tip.css("left"),top:this.$tip.css("top")}}this.$tip.css({left:0,top:0}).appendTo(document.body);if(this.opacity===undefined){this.opacity=this.$tip.css("opacity")}var l=this.$tip.css("background-image").match(d),m=this.$arrow.css("background-image").match(d);if(l){var i=c.test(l[1]);if(b&&i){this.$tip.css("background-image","none");this.$inner.css({margin:0,border:0,padding:0});l=i=false}else{this.$tip.prepend('<table border="0" cellpadding="0" cellspacing="0"><tr><td class="tip-top tip-bg-image" colspan="2"><span></span></td><td class="tip-right tip-bg-image" rowspan="2"><span></span></td></tr><tr><td class="tip-left tip-bg-image" rowspan="2"><span></span></td><td></td></tr><tr><td class="tip-bottom tip-bg-image" colspan="2"><span></span></td></tr></table>').css({border:0,padding:0,"background-image":"none","background-color":"transparent"}).find(".tip-bg-image").css("background-image",'url("'+l[1]+'")').end().find("td").eq(3).append(this.$inner)}if(i&&!e.support.opacity){this.opts.fade=false}}if(m&&!e.support.opacity){if(b&&c.test(m[1])){m=false;this.$arrow.css("background-image","none")}this.opts.fade=false}var o=this.$tip.find("table");if(b){this.$tip[0].style.width="";o.width("auto").find("td").eq(3).width("auto");var n=this.$tip.width(),j=parseInt(this.$tip.css("min-width")),g=parseInt(this.$tip.css("max-width"));if(!isNaN(j)&&n<j){n=j}else{if(!isNaN(g)&&n>g){n=g}}this.$tip.add(o).width(n).eq(0).find("td").eq(3).width("100%")}else{if(o[0]){o.width("auto").find("td").eq(3).width("auto").end().end().width(this.$tip.width()).find("td").eq(3).width("100%")}}this.tipOuterW=this.$tip.outerWidth();this.tipOuterH=this.$tip.outerHeight();this.calcPos();if(m&&this.pos.arrow){this.$arrow[0].className="tip-arrow tip-arrow-"+this.pos.arrow;this.$arrow.css("visibility","inherit")}if(h){this.$tip.css(k).animate({left:this.pos.l,top:this.pos.t},200)}else{this.$tip.css({left:this.pos.l,top:this.pos.t})}},display:function(h){var i=this.$tip.data("active");if(i&&!h||!i&&h){return}this.$tip.stop();if((this.opts.slide&&this.pos.arrow||this.opts.fade)&&(h&&this.opts.hideAniDuration||!h&&this.opts.showAniDuration)){var m={},l={};if(this.opts.slide&&this.pos.arrow){var k,g;if(this.pos.arrow=="bottom"||this.pos.arrow=="top"){k="top";g="bottom"}else{k="left";g="right"}var j=parseInt(this.$tip.css(k));m[k]=j+(h?0:this.opts.slideOffset*(this.pos.arrow==g?-1:1));l[k]=j+(h?this.opts.slideOffset*(this.pos.arrow==g?1:-1):0)}if(this.opts.fade){m.opacity=h?this.$tip.css("opacity"):0;l.opacity=h?0:this.opacity}this.$tip.css(m).animate(l,this.opts[h?"hideAniDuration":"showAniDuration"])}h?this.$tip.queue(e.proxy(this.reset,this)):this.$tip.css("visibility","inherit");this.$tip.data("active",!i)},disable:function(){this.reset();this.=true},enable:function(){this.=false},destroy:function(){this.reset();this.$tip.remove();this.$elm.unbind("poshytip").removeData("title.poshytip").removeData("poshytip");a.splice(e.inArray(this,a),1)},clearTimeouts:function(){if(this.showTimeout){clearTimeout(this.showTimeout);this.showTimeout=0}if(this.hideTimeout){clearTimeout(this.hideTimeout);this.hideTimeout=0}},calcPos:function(){var n={l:0,t:0,arrow:""},h=e(window),k={l:h.scrollLeft(),t:h.scrollTop(),w:h.width(),h:h.height()},p,j,m,i,q,g;if(this.opts.alignTo=="cursor"){p=j=m=this.eventX;i=q=g=this.eventY}else{var o=this.$elm.offset(),l={l:o.left,t:o.top,w:this.$elm.outerWidth(),h:this.$elm.outerHeight()};p=l.l+(this.opts.alignX!="inner-right"?0:l.w);j=p+Math.floor(l.w/2);m=p+(this.opts.alignX!="inner-left"?l.w:0);i=l.t+(this.opts.alignY!="inner-bottom"?0:l.h);q=i+Math.floor(l.h/2);g=i+(this.opts.alignY!="inner-top"?l.h:0)}switch(this.opts.alignX){case"right":case"inner-left":n.l=m+this.opts.offsetX;if(n.l+this.tipOuterW>k.l+k.w){n.l=k.l+k.w-this.tipOuterW}if(this.opts.alignX=="right"||this.opts.alignY=="center"){n.arrow="left"}break;case"center":n.l=j-Math.floor(this.tipOuterW/2);if(n.l+this.tipOuterW>k.l+k.w){n.l=k.l+k.w-this.tipOuterW}else{if(n.l<k.l){n.l=k.l}}break;default:n.l=p-this.tipOuterW-this.opts.offsetX;if(n.l<k.l){n.l=k.l}if(this.opts.alignX=="left"||this.opts.alignY=="center"){n.arrow="right"}}switch(this.opts.alignY){case"bottom":case"inner-top":n.t=g+this.opts.offsetY;if(!n.arrow||this.opts.alignTo=="cursor"){n.arrow="top"}if(n.t+this.tipOuterH>k.t+k.h){n.t=i-this.tipOuterH-this.opts.offsetY;if(n.arrow=="top"){n.arrow="bottom"}}break;case"center":n.t=q-Math.floor(this.tipOuterH/2);if(n.t+this.tipOuterH>k.t+k.h){n.t=k.t+k.h-this.tipOuterH}else{if(n.t<k.t){n.t=k.t}}break;default:n.t=i-this.tipOuterH-this.opts.offsetY;if(!n.arrow||this.opts.alignTo=="cursor"){n.arrow="bottom"}if(n.t<k.t){n.t=g+this.opts.offsetY;if(n.arrow=="bottom"){n.arrow="top"}}}this.pos=n}};e.fn.poshytip=function(g){if(typeof g=="string"){return this.each(function(){var i=e(this).data("poshytip");if(i&&i[g]){i[g]()}})}var h=e.extend({},e.fn.poshytip.defaults,g);if(!e("#poshytip-css-"+h.className)[0]){e(['<style id="poshytip-css-',h.className,'" type="text/css">',"div.",h.className,"{visibility:hidden;position:absolute;top:0;left:0;}","div.",h.className," table, div.",h.className," td{margin:0;font-family:inherit;font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;}","div.",h.className," td.tip-bg-image span{display:block;font:1px/1px sans-serif;height:",h.bgImageFrameSize,"px;width:",h.bgImageFrameSize,"px;overflow:hidden;}","div.",h.className," td.tip-right{background-position:100% 0;}","div.",h.className," td.tip-bottom{background-position:100% 100%;}","div.",h.className," td.tip-left{background-position:0 100%;}","div.",h.className," div.tip-inner{background-position:-",h.bgImageFrameSize,"px -",h.bgImageFrameSize,"px;}","div.",h.className," div.tip-arrow{visibility:hidden;position:absolute;overflow:hidden;font:1px/1px sans-serif;}","</style>"].join("")).appendTo("head")}return this.each(function(){new e.Poshytip(this,h)})};e.fn.poshytip.defaults={content:"[title]",className:"tip-yellow",bgImageFrameSize:10,showTimeout:500,hideTimeout:100,showOn:"hover",alignTo:"cursor",alignX:"right",alignY:"top",offsetX:-22,offsetY:18,allowTipHover:true,followCursor:false,fade:true,slide:true,slideOffset:8,showAniDuration:300,hideAniDuration:300}})(jQuery);(function(a){a.fn.hoverIntent=function(k,j){var l={sensitivity:7,interval:100,timeout:0};l=a.extend(l,j?{over:k,out:j}:k);var n,m,h,d;var e=function(f){n=f.pageX;m=f.pageY};var c=function(g,f){f.hoverIntent_t=clearTimeout(f.hoverIntent_t);if((Math.abs(h-n)+Math.abs(d-m))<l.sensitivity){a(f).unbind("mousemove",e);f.hoverIntent_s=1;return l.over.apply(f,[g])}else{h=n;d=m;f.hoverIntent_t=setTimeout(function(){c(g,f)},l.interval)}};var i=function(g,f){f.hoverIntent_t=clearTimeout(f.hoverIntent_t);f.hoverIntent_s=0;return l.out.apply(f,[g])};var b=function(q){var o=(q.type=="mouseover"?q.fromElement:q.toElement)||q.relatedTarget;while(o&&o!=this){try{o=o.parentNode}catch(q){o=this}}if(o==this){return false}var g=jQuery.extend({},q);var f=this;if(f.hoverIntent_t){f.hoverIntent_t=clearTimeout(f.hoverIntent_t)}if(q.type=="mouseover"){h=g.pageX;d=g.pageY;a(f).bind("mousemove",e);if(f.hoverIntent_s!=1){f.hoverIntent_t=setTimeout(function(){c(g,f)},l.interval)}}else{a(f).unbind("mousemove",e);if(f.hoverIntent_s==1){f.hoverIntent_t=setTimeout(function(){i(g,f)},l.timeout)}}};return this.mouseover(b).mouseout(b)}})(jQuery);jQuery(document).ready(function(a){a(window).resize(function(){var b=a(window);if(b.width()<1130){a(".share_button_top.collapsable").removeClass("share_button_top").addClass("share_button_right")}else{a(".share_button_right.collapsable").removeClass("share_button_right").addClass("share_button_top")}}).resize();a(".simpledialog").simpleDialog({duration:130,easing:"swing",opacity:0.2});a("<div id='growlTip'></div>").appendTo("body").click(function(){a("#growlTip").animate({opacity:"hide"},200)}).hide();a(".add-menu a.reply").click(function(){var b=a(".commentform_user_reply").detach();a(".replying").removeClass("replying");if(b.length===0){b=a(".commentform_user").clone();b.addClass("commentform_user_reply");b.append("<a href='#' class='cancelCommentReply'>Cancel Reply</a>");b.find(".cancelCommentReply").click(function(){a(this).parent().hide().parents(".replying").removeClass("replying");a(".commentform_user:not(.commentform_user_reply)").fadeIn(450);return false});b.find(".commentform_title").text("Add A Reply")}var c=a(a(this).parents("li.comment").get(0));a(c.find(".inner").get(0)).after(b).addClass("replying");var e=c.attr("id").match(/\d+/);c.find("#comment_parent").val(e);a(".commentform_user").hide();b.hide().animate({opacity:"show"},450);b.find("textarea").focus();var d=a(window).height()-b.height()-150;a.scrollTo(b,150,{offset:-d});return false});a(".add-menu a.vote, .add-menu a.flag").click(function(){a.ajax({url:a(this).attr("href"),data:{_method:"put"},type:"post",dataType:"script"});return false})});window.connectService=function(a){var b=$(".network_"+a).closest(".network_connection");b.removeClass("unconnected").addClass("connected checked").find("input").attr("checked",true)};var hideTip;function hideTooltip(){var a=$("#growlTip");var b=a.offset();a.animate({top:(b.top-15)+"px",opacity:"hide"},250)}function comment_vote(b){if(b.status=="ok"){var a="div#comment-"+b.comment_wpid;$(a+" a.voted_up, "+a+" a.voted_down").removeClass("voted_up voted_down");if(b.vote==1){up=$(a+" a.vote-up");down=$(a+" a.vote-down");up.addClass("voted_up")}else{up=$(a+" a.vote-down");down=$(a+" a.vote-up");up.addClass("voted_down")}up.text(parseInt(up.text(),10)+1);if(b.reversed!=false){down.text(parseInt(down.text(),10)-1)}flash("Your vote has been registered!",["message"])}else{flash(b.message,["error"])}}function comment_flag(a){if(a.status=="ok"){var b="div#comment-"+a.comment_wpid;if(a.flagged){$(b).addClass("flagged").find("a.flag").addClass("flagged")}else{$(b).removeClass("flagged").find("a.flag").removeClass("flagged")}}}(function(){var a;window||(window=this);document||(document=window.document);a=null;this.flash=function(j,c){var b,d,f,g,e,h;if(!(j instanceof Array)){j=[j]}if(j.length===0){return}f="";for(g=0,h=j.length-1;(0<=h?g<=h:g>=h);(0<=h?g+=1:g-=1)){if(c){e=c[g]}f+="<div class='flash-content "+e+"'>"+j[g]+"</div>"}b=$(".flash");d=$(".flash-wrap");b.css({opacity:0});d.html(f);return setTimeout(function(){var i;d.css({opacity:0});b.removeClass("hidden").css({opacity:0}).show().animate({opacity:1},250,function(){return d.animate({opacity:1},250)});i=b.data("timeout");if(i){clearTimeout(i)}return b.data("timeout",setTimeout(function(){return b.animate({opacity:0},250)},20000))},350)};this.popupCenter=function(d,e,b,c){var g,f;g=(screen.width/2)-(e/2);f=(screen.height/2)-(b/2);return void(d,c,"menubar=no,toolbar=no,status=no,width="+e+",height="+b+",toolbar=no,left="+g+",top="+f)};this.checkChildClosed=function(){if(checkWin&&checkWin.closed){$.simpleDialog.close();return clearInterval(checkInterval)}};this.invokeLogin=function(c,e){var b,d;if(c){$.simpleDialogManual({duration:130,easing:"swing",opacity:0.5,containerClass:"sd_loading_container",content:" "});d=e;return b=setInterval(checkChildClosed,50)}else{return $.simpleDialogManualAjax({duration:130,easing:"swing",opacity:0.5},"/follow/login?"+new Date().getTime(),{},"GET")}};this.returnFromPopup=function(b){var g,d,e,c;if(b){e=[];c=[];for(d in b){g=b[d];e.push(g);c.push(d)}if(e.length>0){flash(e,c)}}if(window.checkInterval){clearInterval(window.checkInterval)}$.simpleDialogManual({duration:130,easing:"swing",opacity:0.5,content:"<h1 style='width: 320px;'><span class='ajax_loader'></span> Refreshing, please wait...</h1>"});window.location.reload(true);return true};jQuery(document).ready(function(g){var f,i,e,c,b,d,h;g(document).bind("ajaxError",function(l,m,j,k){if(m.status===401){return window.invokeLogin()}});g(document).bind("ajaxSend",function(l,m,j){var k;k=g("meta[name='csrf-token']").attr("content");if(k!==""){return m.setRequestHeader("X-CSRF-Token",k)}});g(".share_networks").hide().removeClass("hidden");g(".share_button").hoverIntent(function(){return g(this).addClass("hovered").find(".share_networks:hidden").css({opacity:0}).show().animate({opacity:1},150)},function(){return g(this).removeClass("hovered").find(".share_networks:visible").hide()});d=g("#follow_share_form");e=d.find(".title");c=d.find(".url");i=d.find("textarea");f=d.find(".share_charct");h=function(){var j,k;k=140;k-=e.val().length+c.text().length+15;j=k;if(!i.hasClass("defaultText")){j-=i.val().length}if(j<0){f.addClass("too-many-chars")}else{f.removeClass("too-many-chars")}return f.text(j)};g(".share_button").click(function(k){var p,m,j,s,o,q,l,n;p=g(this);d=g("#follow_share_form");if(p.hasClass("shared")){return false}if(p.find("#follow_share_form:visible").length===0){g(".share_networks").hide();p.append(d.css({left:"0px"}).hide().detach());m=p.offset();s=m.left+d.width();n=g(window).width();if(s>n){d.css({left:-(s-n+50)+"px"})}q=p.data("title");l=p.data("uri");o=p.attr("href");d.find(".title").val(q);d.find(".url").text(l);d.find("textarea").val("").blur();d.find(".thumb img").attr("src",p.data("thumb"));d.find("form").css({opacity:0}).attr("action",o);d.show(180,function(){return p.find("form").animate({opacity:1},200)});h();j=false}k.stopPropagation();return j});g("#follow_share_form form").submit(function(){var j,k;j=g(this);if(j.parents(".share_button").length===0){return true}i=j.find("textarea");if(i.val()===i.attr("title")){i.val("")}k=j.serialize();g.ajax({type:"post",url:j.closest(".share_button").find(".share_link").attr("href"),data:k,dataType:"script"});return false});g("a.popup").live("click",function(){var n,k,m,j,l;if(navigator.userAgent.match(/iPad/i)!==null){return true}else{n=g(this);j=n.attr("class").match(/popup-(\d+)x(\d+)/);l=450;k=300;if(j&&j.length===3){l=parseInt(j[1],10);k=parseInt(j[2],10)}m=popupCenter(n.attr("href")+"?r="+window.location.pathname,l,k,"FollowLogin");invokeLogin(true,m);return false}});g(document).click(function(){var j;j=g(".share_button #follow_share_form:visible");j.find("form").animate({opacity:0},250,function(){return j.hide("fast")});return g("a#follow-anchor").removeClass("active")});g("#follow_share_form textarea").focus(function(){var j;j=g(this);if(j.val()===j.attr("title")){return j.removeClass("defaultText").val("")}}).blur(function(){var j;j=g(this);if(j.val()===""){return j.addClass("defaultText").val(j.attr("title"))}}).blur().keydown(h).keyup(h);g("#follow_share_form input").keydown(h).keyup(h);g("#follow_share_form .close").click(function(){g(document).click();return false});b=function(){var k,j,l;k=g(this);if(g("#share_network_twitter").attr("checked")){g("#follow_share_form .share_charct").show()}else{g("#follow_share_form .share_charct").hide()}l=k.closest(".network_connection");if(l.hasClass("connected")){return l.toggleClass("checked")}else{j=l.find(".network").attr("class").match(/network_([a-z_]+)/);if(j.length>1){popupCenter("/follow/login/oauth/"+j[1],850,730,"FollowLogin-"+j[1])}k.attr("checked",l.hasClass("checked"));return false}};g(".shareToButtons .network_connection input").change(b);g("nav #user #name-hover").hoverIntent(function(){var j;j=g(this);j.find(".name").addClass("name-active");return j.find(".menu").removeClass("hidden").show()},function(){var j;j=g(this);j.find(".name").removeClass("name-active");return j.find(".menu").hide()});if(!(g.browser.webkit||g.browser.opera||g.browser.mozilla)){g("input[type='search']").focus(function(){var j;j=g(this);if(j.val()===j.attr("placeholder")){return j.val("")}}).blur(function(){var j;j=g(this);if(j.val()===""){return j.val(j.attr("placeholder"))}}).blur()}g(".follow_link, .comment .follow_button").click(function(){var j;j=g(this);g.ajax({url:j.attr("href"),type:"put",dataType:"json",success:function(k,m,l){return j.fadeOut(150,function(){if(k.follow){j.removeClass("follow_obj_link").addClass("following_obj_link")}else{j.removeClass("following_obj_link").addClass("follow_obj_link")}j.attr("href",k.link);j.text(k.title);if(j.closest(".hide_on_accept").length>0){j.closest(".user_row").hide("fast");if(j.closest(".user_rows").find(".user_row:visible").length<=1){return j.closest(".user_rows").find(".emptymsg").removeClass("hidden").show("fast")}}else{return j.fadeIn(150)}})}});return false});g(".flash").click(function(){return g(this).hide()});return g(".flash a").click(function(j){return j.stopPropagation()})})}).call(this);