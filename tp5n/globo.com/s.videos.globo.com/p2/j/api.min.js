
(function($)
{var DEFAULT_PLAYER_HEIGHT=240;var DEFAULT_PLAYER_WIDTH=320;$.getUserAgent=function(){return navigator.userAgent;};$.isMobileBrowser=function(){var userAgent=$.getUserAgent();return(/iPhone/i.test(userAgent)||/iPad/i.test(userAgent)||/iPod/i.test(userAgent)||/Android/i.test(userAgent));};$.fn.player=function(options){var settings=$.extend({},options);var objsSelecteds=$(this);return this.each(function(){var obj=$(this);var environment=settings.environment||obj.attr('data-player-environment');var flashVarOptions=_getFlashvarsOptions(settings,obj);if(isValidSize(settings,obj)&&isValidVideosIDs(settings,obj)){if(_isToUseGMCEmbed(settings,obj)){if(_isGMCEmbedLoaded()){var embedOptions=$.extend({},flashVarOptions,{banda:_convertSizeToBanda(settings,obj)});if((embedOptions.autoPlay==false)||(embedOptions.autoPlay==='false')){delete embedOptions.autoPlay;}
var embed=new GMCEmbed(embedOptions);obj.html(embed.toString(true));}else{_loaddisabledGMCEmbed(objsSelecteds,options);return false;}}else{var swfUrl=_getSwfUrl(settings,obj);var objectId='player-'+flashVarOptions.videosIDs.split(',').join('-');var objectTag='<objectdisabled type="application/x-shockwave-flash" ';objectTag+='id="'+objectId+'" ';objectTag+='width="'+_getWidth(settings,obj)+'" ';objectTag+='height="'+_getHeight(settings,obj)+'" ';objectTag+='data="'+swfUrl+'" >\n';objectTag+='<param name="flashvars" value="'+$.param(flashVarOptions)+'" />\n';objectTag+='<param name="movie" value="'+swfUrl+'" />';objectTag+='<param name="quality" value="high" />';objectTag+='<param name="wmode" value="opaque" />';objectTag+='<param name="allowScriptAccess" value="always" />';objectTag+='<param name="allowFullScreen" value="true" />';objectTag+='<param value="#000000" name="bgcolor" />';objectTag+='</object>';obj.get(0).innerHTML=objectTag;obj.data('player-options',$.extend({},flashVarOptions,_getCallbacksOptions(settings,obj)));}}});};var _getWidth=function(settings,obj){var widthS=settings.width||obj.attr('data-player-width');return isNaN(widthS)?DEFAULT_PLAYER_WIDTH:Number(widthS);};var _getHeight=function(settings,obj){var heightS=settings.height||obj.attr('data-player-height');return isNaN(heightS)?DEFAULT_PLAYER_HEIGHT:Number(heightS);};var isValidVideosIDs=function(settings,obj){var videosIDs=settings.videosIDs||obj.attr('data-player-videosIDs');if(!videosIDs){obj.html('Não foi possível exibir o player');_log('Parâmetro videosIDs inválido: '+videosIDs);return false;}
return true;};var isValidSize=function(settings,obj){var banda=_convertSizeToBanda(settings,obj);if(!banda){obj.html('Não foi possível exibir o player');_log('Parâmetro width ou height inválidos. Tamanhos válidos: 288x216, 320x240, 480x360, 640x360');return false;}
return true;};var _convertSizeToBanda=function(settings,obj){var width=_getWidth(settings,obj);var height=_getHeight(settings,obj);var size=width+'x'+height;var banda=null;switch(size){case"288x216":banda="I";break;case"320x240":banda="N";break;case"480x360":banda="L";break;case"640x360":banda="X";break;}
return banda;};var _getFlashvarsOptions=function(settings,obj){var flashvarsOptions={videosIDs:settings.videosIDs||obj.attr('data-player-videosIDs'),autoPlay:settings.autoPlay||obj.attr('data-player-autoPlay'),sitePage:settings.sitePage||obj.attr('data-player-sitePage'),displayLightButton:settings.displayLightButton||obj.attr('data-player-displayLightButton'),displayThumbsUpButton:settings.displayThumbsUpButton||obj.attr('data-player-displayThumbsUpButton'),environment:settings.environment||obj.attr('data-player-environment')||'prod',height:_getHeight(settings,obj),width:_getWidth(settings,obj)};var options=$.extend({},flashvarsOptions);options.videosIDs=String(options.videosIDs);return options;};var _getCallbacksOptions=function(settings,obj){var callbacksOptions={onLightOn:settings.onLightOn||obj.attr('data-player-onLightOn'),onLightOff:settings.onLightOff||obj.attr('data-player-onLightOff'),onPlay:settings.onPlay||obj.attr('data-player-onPlay'),onPause:settings.onPause||obj.attr('data-player-onPause'),onStop:settings.onStop||obj.attr('data-player-onStop'),onReadyToPlay:settings.onReadyToPlay||obj.attr('data-player-onReadyToPlay'),onSeek:settings.onSeek||obj.attr('data-player-onSeek'),onVolumeChange:settings.onVolumeChange||obj.attr('data-player-onVolumeChange'),onMute:settings.onMute||obj.attr('data-player-onMute'),onUnmute:settings.onUnmute||obj.attr('data-player-onUnmute'),onEnterFullScreen:settings.onEnterFullScreen||obj.attr('data-player-onEnterFullScreen'),onExitFullScreen:settings.onExitFullScreen||obj.attr('data-player-onExitFullScreen'),complete:settings.complete||obj.attr('data-player-complete'),zIndex:settings.zIndex||obj.attr('data-player-zIndex')};return $.extend({},callbacksOptions);};var _isToUseGMCEmbed=function(options,obj){var isToUseGMCEmbed=(options&&options.forceGMCEmbed)||$(obj).attr('data-player-forceGMCEmbed')||$.isMobileBrowser();return/true/i.test(isToUseGMCEmbed);};var _getVideosPlayerEmbedJsHostAndProtocol=function(environment){if(environment&&environment==="qa1"){return"httpdisabled://webmedia.cma.qa01.globoi.com";}
if(/\.globoi\.com$/.test(location.hostname)){return"httpdisabled://conteudo.globoi.com";}
return"httpdisabled://video.globo.com";};var _getSwfUrl=function(settings,obj){var swf=settings.swf||obj.attr('data-player-swf');if(swf){return swf;}
var environment=settings.environment||obj.attr('data-player-environment');return'http://'+_getPlayerHost(environment)+'/p2/player.swf';};var _getPlayerHost=function(environment){if(environment&&environment==="qa1"){return"s.videos.cma.qa01.globoi.com";}
if(/\.globoi\.com$/.test(location.hostname)){return"player.globoi.com";}
return"s.videos.globo.com";};var _isGMCEmbedLoaded=function(){return(typeof(GMCEmbed)=="function"&&typeof(GMCEmbed.prototype)=="object");}
var _loaddisabledGMCEmbed=function(objs,options){var environment=_getEnvironment(objs,options);$.getScript(_getVideosPlayerEmbedJsHostAndProtocol(environment)+"/Portal/videos/cda/js/glb_videos_player_embed_js",function(){objs.player(options);});};var _getEnvironment=function(objs,options){var environment=(options)?options.environment:null;if(!environment){objs.each(function(){environment=$(this).attr('data-player-environment');if(environment){return false;}});}
return environment;};var _log=function(){if(window.console&&window.console.log){window.console.log.apply(null,arguments);}};})(jQuery);function f_clientHeight(){var n_win=window.innerHeight?window.innerHeight:0;var n_docel=document.documentElement?document.documentElement.clientHeight:0;var n_body=document.body?document.body.clientHeight:0;return Math.max(n_win,Math.max(n_docel,n_body));}
function f_clientWidth(){var n_win=window.innerWidth?window.innerWidth:Number.MAX_VALUE;var n_docel=document.documentElement?document.documentElement.clientWidth:Number.MAX_VALUE;var n_body=document.body?document.body.clientWidth:Number.MAX_VALUE;return Math.min(n_win,Math.min(n_docel,n_body));}
function findCoordinates(element){var leftSide=topSide=rightSide=bottomSide=0;var obj=element;if(obj.offsetParent){do{topSide+=obj.offsetTop;leftSide+=obj.offsetLeft;}while(obj=obj.offsetParent);rightSide=element.offsetWidth+leftSide;bottomSide=element.offsetHeight+topSide;}
return[leftSide,topSide,rightSide,bottomSide];}
function onLightOff(event,videosIDs){var object=$('#player-'+videosIDs);var options=object.parent().data('player-options');createShadow(options);$('#gmcembed-shadow').data('mainObjId',object.attr('id'));resizeAndPositioningShadow();showShadow();$(window).bind('resize',onResizeOrScroll);$(window).bind('scroll',onResizeOrScroll);}
function onLightOn(event,videosIDs){$('#gmcembed-shadow').data('mainObjId',null);hideShadow();$(window).unbind('resize',onResizeOrScroll);$(window).unbind('scroll',onResizeOrScroll);}
var resizeAndPositioningShadowTimer;function createShadow(options){if(!$('#gmcembed-shadow').length){$('body').append('<div id="gmcembed-shadow">'+'<div id="left-shadow"   style="display: none; background-color: black; position: absolute;"></div>'+'<div id="top-shadow"    style="display: none; background-color: black; position: absolute;"></div>'+'<div id="right-shadow"  style="display: none; background-color: black; position: absolute;"></div>'+'<div id="bottom-shadow" style="display: none; background-color: black; position: absolute;"></div>'+'</div>');}
var zIndex=(options&&options.zIndex&&!isNaN(options.zIndex))?Number(options.zIndex):100000;var shadow=$('#gmcembed-shadow div');shadow.css('zIndex',zIndex);shadow.css('opacity',0.85);shadow.css('-ms-filter:progid','DXImageTransform.Microsoft.Alpha(Opacity=85)');shadow.css('filter','alpha(opacity=85)');};function onResizeOrScroll(){clearTimeout(resizeAndPositioningShadowTimer);resizeAndPositioningShadowTimer=setTimeout(resizeAndPositioningShadow,10);}
function resizeAndPositioningShadow(){var obj=$('#'+$('#gmcembed-shadow').data('mainObjId')).get(0);if((obj!=undefined)&&(obj!=null)){var coords=findCoordinates(obj);var clientWidth=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft)+f_clientWidth();$('#gmcembed-shadow #top-shadow').css('top','0px').css('left','0px');$('#gmcembed-shadow #top-shadow').css('height',coords[1]+'px').css('width',clientWidth+'px');$('#gmcembed-shadow #left-shadow').css('top',coords[1]+'px').css('left','0px');$('#gmcembed-shadow #left-shadow').css('height',(coords[3]-coords[1])+'px').css('width',coords[0]+'px');$('#gmcembed-shadow #right-shadow').css('top',coords[1]+'px').css('left',coords[2]+'px');$('#gmcembed-shadow #right-shadow').css('height',(coords[3]-coords[1])+'px').css('width',(clientWidth-coords[2])+'px');$('#gmcembed-shadow #bottom-shadow').css('top',coords[3]+'px').css('left','0px');$('#gmcembed-shadow #bottom-shadow').css('height',(f_clientHeight()-coords[3])+'px').css('width',clientWidth+'px');}}
function showShadow(){$('#gmcembed-shadow div').fadeIn('slow');}
function hideShadow(){$('#gmcembed-shadow div').fadeOut('slow');}
function playerJavascriptInterfaceReady(videosIDs,timeout){if(timeout){timeout=timeout+10;}else{timeout=10;}
var playerObject=$('#player-'+videosIDs);if(playerObject.length==0){setTimeout(setTimeout(function(){playerJavascriptInterfaceReady(videosIDs,timeout);}),timeout);}
playerObject.each(function(i,obj){try{var options=$(obj).parent().data('player-options');if(options){if(options.displayLightButton){obj.addListener('onLightOn',(options.onLightOn)?options.onLightOn:'onLightOn');obj.addListener('onLightOff',(options.onLightOff)?options.onLightOff:'onLightOff');}
if(options.onPlay)obj.addInputListener('onPlay',options.onPlay);if(options.onPause)obj.addInputListener('onPause',options.onPause);if(options.onStop)obj.addInputListener('onStop',options.onStop);if(options.onReadyToPlay)obj.addInputListener('onReadyToPlay',options.onReadyToPlay);if(options.onSeek)obj.addInputListener('onSeek',options.onSeek);if(options.onVolumeChange)obj.addInputListener('onVolumeChange',options.onVolumeChange);if(options.onMute)obj.addInputListener('onMute',options.onMute);if(options.onUnmute)obj.addInputListener('onUnmute',options.onUnmute);if(options.onEnterFullScreen)obj.addInputListener('onEnterFullScreen',options.onEnterFullScreen);if(options.onExitFullScreen)obj.addInputListener('onExitFullScreen',options.onExitFullScreen);if(options.complete)obj.addListener('complete',options.complete);}else{setTimeout(setTimeout(function(){playerJavascriptInterfaceReady(videosIDs,timeout);}),timeout);}}catch(e){if(window.console&&window.console.log){window.console.log(e);}}});}
$(document).ready(function()
{$('.player').player();});