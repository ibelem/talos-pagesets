(function(global,$){var widthAtivo=28;var widthInativo=2;var opaco={opacity:1};var semiOpaco={opacity:0.8};var invisivel={opacity:0};var ativo={width:widthAtivo};var inativo={width:widthInativo};var ativoOpaco={width:widthAtivo,opacity:1};var ativoTranslucido={width:widthAtivo,opacity:0.5};var inativoOpaco={width:widthInativo,opacity:1};$.widget('glb.carrossel',{options:{identificador:'libbycarrossel',duracaoAnimacao:200,intervalo:8000,indiceInicial:0,zIndex:99},_create:function(){this.timer=null;this.indice=this.options.indiceInicial;this.passos=this.element.find('div.glb-carrossel-passo');this.numeroDePassos=this.passos.length;this.navegacao=this.element.find('div.glb-carrossel-navegacao');this.tituloFundo=this.element.find('span.glb-carrossel-titulo-fundo');this.itensNavegacaoLi=this.navegacao.find('li');this.itensNavegacao=this.navegacao.find('a');this.itensNavegacaoBg=this.itensNavegacao.filter('.glb-carrossel-navegacao-item-bg');this.itensNavegacaoBgAtivo=this.itensNavegacao.filter('.glb-carrossel-navegacao-item-bg-ativo');this.thumbs=this.element.find('div.glb-carrossel-thumb');this.primeiraAnimacao=true;this._ativar();this.iniciarCiclo();this._adicionarEventosNavegacao();this._adicionarEventosHover();this._setarAltura();},_setarAltura:function(){if(this.element.hasClass('glb-carrossel-passos-compacto')){return;}
var alturas=this.passos.map(function(){return $(this).height();}).get();var maiorAltura=Math.max.apply(Math.max,alturas);this.element.height(maiorAltura);},iniciarCiclo:function(){if(this.timer){return;}
this.timer=setInterval($.proxy(this.incrementaPasso,this),this.options.intervalo);},cancelarCiclo:function(){clearInterval(this.timer);this.timer=null;},_ativar:function(){var primeiroBgAtivo=this.itensNavegacaoBgAtivo.first();primeiroBgAtivo.css('width',primeiroBgAtivo.css('width'));this.itensNavegacaoLi.first().removeClass('glb-carrossel-navegacao-item-ativo');},_adicionarEventosNavegacao:function(){var self=this;this.itensNavegacaoLi.each(function(i,el){var item=$(this);var bgAtivo=self.itensNavegacaoBgAtivo;var thumbs=self.thumbs;var duracaoAnimacao=self.options.duracaoAnimacao;self._bind(item,'mouseenter',function(){bgAtivo.eq(self.indice).stop().animate(ativoTranslucido);bgAtivo.eq(i).stop().animate(ativoOpaco,{duration:duracaoAnimacao});thumbs.eq(i).show().stop().animate(opaco);});self._bind(item,'mouseleave',function(){bgAtivo.eq(self.indice).stop().animate(ativoOpaco);bgAtivo.eq(i).not(bgAtivo.eq(self.indice)).stop().animate(inativo,{duration:duracaoAnimacao});thumbs.eq(i).stop().animate(invisivel,{complete:function(){$(this).hide();}});});self._bind(item,'click',function(){self.primeiraAnimacao=false;if(self.indice==i){return;}
self.trocaPasso(self.indice,i);});});this._bind(this.itensNavegacao,'click',function(e){e.preventDefault();});},_adicionarEventosHover:function(){var self=this;this._bind(this.element,'mouseenter',function(){self.cancelarCiclo();self.exibeNavegacao();self.destacarTitulo();});this._bind(this.element,'mouseleave',function(){self.iniciarCiclo();self.escondeNavegacao();self.normalizarTitulo();});},incrementaPasso:function(){var indiceAnterior=this.indice;this.indice=(this.indice+1)%this.numeroDePassos;this.trocaPasso(indiceAnterior,this.indice);this.itensNavegacaoBg.eq(indiceAnterior).css(inativo);},trocaPasso:function(indiceAnterior,indiceAtual){this.indice=indiceAtual;this.animacao(indiceAnterior,indiceAtual);},animacao:function(indiceAnterior,indiceAtual){var self=this;var passoAnterior=this.passos.eq(indiceAnterior);var passoAtual=this.passos.eq(indiceAtual);var navegacaoAnterior=this.itensNavegacaoBgAtivo.eq(indiceAnterior);var navegacaoAtual=this.itensNavegacaoBgAtivo.eq(indiceAtual);if(this.primeiraAnimacao){this.itensNavegacao.not(navegacaoAnterior).stop().animate(inativo,{duration:this.options.duracaoAnimacao});this.primeiraAnimacao=false;}
var onNavegacao=function(){self.passos.css('z-index',self.options.zIndex-1);passoAnterior.css('z-index',self.options.zIndex+1);passoAtual.css('z-index',self.options.zIndex).css('opacity','').show();navegacaoAtual.stop().animate(ativo,{duration:self.options.duracaoAnimacao});passoAnterior.stop().animate(invisivel,{duration:self.options.duracaoAnimacao,complete:function(){$(this).hide();}});};navegacaoAnterior.animate(inativoOpaco,{complete:onNavegacao,duration:this.options.duracaoAnimacao});},exibeNavegacao:function(){this.itensNavegacaoBg.stop().animate(ativo,{duration:this.options.duracaoAnimacao});},escondeNavegacao:function(){this.itensNavegacaoBgAtivo.eq(this.indice).stop().animate(ativoOpaco,{duration:this.options.duracaoAnimacao});this.itensNavegacaoBg.not(this.itensNavegacaoBg.eq(this.indice)).stop().animate(inativo,{duration:this.options.duracaoAnimacao});},destacarTitulo:function(){this.tituloFundo.stop().animate(opaco);},normalizarTitulo:function(){this.tituloFundo.stop().animate(semiOpaco);},_bind:function(el,event,fn){el.bind(event+'.'+this.options.identificador,fn);}});$('#glb_carrossel').carrossel();})(this,jQuery);$.widget('glb.topglobocom',{options:{buscaUrl:'/tagcloud/globo-tagCloud.txt'},_create:function(){this.seta=this.element.find('.navegador');this.setaTop=this.seta.position().top;this.tabContents=this.element.find('div.tab-content');this.itensList=this.element.find('.itens');this.links=this.itensList.find('a');this.lis=this.itensList.find('li');this.currentIndex=0;this.hasSearchedBefore=false;this._attachEvents();},_attachEvents:function(){var self=this;this.links.each(function(i,link){$(link).click(function(e){if(self.currentIndex==i){return false;}
if(i==1){self.getSearchTermsAndPopulateTagCloud();}
var newContent=self.tabContents.eq(i);var oldContent=self.tabContents.eq(self.currentIndex);var others=self.tabContents.not(newContent);self.currentIndex=i;self.tabContents.css('z-index',1);oldContent.css('z-index',3);newContent.stop().css({'z-index':2,'opacity':''}).show();var newLi=self.lis.eq(i);var newTop=newLi.position().top;self.seta.stop().animate({top:newTop+self.setaTop},{duration:300,easing:"swing"});oldContent.stop().animate({opacity:0},{duration:300,complete:function(){oldContent.hide();}});self.getAnalytics($(this));return false;});});},sortByProperty:function(obj,property,desc){obj.sort(function(obj1,obj2){var offset=1;if(desc){offset=-1;}
return obj1[property]<obj2[property]?-1*offset:(obj1[property]>obj2[property]?1*offset:0);});},getSearchTermsAndPopulateTagCloud:function(){var self=this;if(self.hasSearchedBefore){return;}
var distribution={maior:3,grande:5,medio:10,pequeno:11};var numberOfItems=distribution.maior+
distribution.grande+
distribution.medio+
distribution.pequeno;var getClassFor=function(item){for(var key in distribution){if(distribution[key]){distribution[key]--;return key;}}};var searchUrlFor=function(term){return"httpdisabled://busca.globo.com/Busca/?query="+term;};var populateTagCloud=function(data){self.sortByProperty(data,'frequency',true);var items=data.slice(0,numberOfItems);$.each(items,function(){this.category=getClassFor(this);});self.sortByProperty(items,"term");var tagCloud=self.tabContents.eq(1).find('.tag-cloud');var busca=self.tabContents.eq(1).find('.busca');var tagCouldUl=$('<ul/>');tagCloud.empty();$.each(items,function(){var item=this;var li=$('<li><a title="Busca por '+item.term+'" href="'+searchUrlFor(item.term)+'&annotationClass=no" rel="tag">'+item.term+'</a></li>');li.addClass(item.category);tagCouldUl.append(li);});tagCloud.append(tagCouldUl).show();busca.show();};$.getJSON(self.options.buscaUrl,function(data){self.hasSearchedBefore=true;populateTagCloud(data);});},getAnalytics:function(link){if(libby.analytics.links.generateAnalytics){var url=link.attr("href");var value;if(url.indexOf("mais-vistas")!==-1){value="R";}else if(url.indexOf("mais-buscadas")!==-1){value="X";}else if(url.indexOf("mais-sociais")!==-1){value="Q";}
libby.analytics.links.generateAnalytics(link,value);}}});$('#topglobocom').topglobocom();$(document).ready(function(){$('#ge-mosaico-times .ge-combo-mosaico').bind('click',function(){$(this).hide();$('.ge-combo-mosaico-opcoes').show();});$('#ge-mosaico-times .ge-combo-mosaico-opcoes li').click(function(){$('.ge-escudos').hide();$('#'+$(this).attr('title')).show();$('.ge-nome-serie').text($(this).text());$('.ge-combo-mosaico-opcoes').hide();$('.ge-combo-mosaico').show();});$('#ge-mosaico-times .ge-off').bind('click',function(){$('.ge-combo-mosaico-opcoes').hide();$('.ge-combo-mosaico').show();});});$.widget('glb.boxVideo',{options:{banda:'I',autoStart:true},_create:function(options){var self=this;this.link=this.element.find('a');this.arrow=this.link.find('span.arrow');this.arrowOpacity=this.arrow.css('opacity');this.setDefaultOptions();this.link.bind('click',function(e){self.clickEvent();e.preventDefault();});if($.support.opacity){this.link.hover($.proxy(this.enterEvent,this),$.proxy(this.leaveEvent,this));}},setDefaultOptions:function(){var videoUrl=this.link.attr('href');this._setOption('midiaId',this.extractMidiaIdFromVideoUrl(videoUrl));this._setOption('sitePage',this.link.attr('rel'));if(!this.options.hostNovoPlayer){delete this.options.hostNovoPlayer;}
if(!this.options.environment){delete this.options.environment;}},enterEvent:function(e){this.arrow.stop().animate({opacity:1},300);},leaveEvent:function(e){this.arrow.stop().animate({opacity:this.arrowOpacity},300);},clickEvent:function(){if(preventRefresh&&preventRefresh.prevent){preventRefresh.prevent();}
var oldOnPlay=this.options.onPlay;this.options.onPlay=function(object){document.isPlaying=true;if(oldOnPlay){oldOnPlay.apply(this,arguments);}};var oldOnTermino=this.options.onTerminoDoVideo;this.options.onTerminoDoVideo=function(object){document.isPlaying=false;if(oldOnTermino){oldOnTermino.apply(this,arguments);}};var videoUrl=this.link.attr("href");var videoId=this.extractMidiaIdFromVideoUrl(videoUrl);var sitePage=this.link.attr("rel");this.link.hide();this.element.find(".video-flash").player({videosIDs:videoId,sitePage:sitePage,autoPlay:true,width:288,height:216});},extractMidiaIdFromVideoUrl:function(videoUrl){var re=/.*[A-Z]{3}(\d+)-.*/;var f=re.exec(videoUrl);return(f)?f[1]:'';}});$.widget('glb.boxVideoTriplo',{options:{sitePage:null},lastHover:null,lastOut:null,_create:function(){var elem=this.element.find(".lst-nav a");elem.attr("title","");elem.find("img").attr("alt","");this.thumbHover();this.thumbClick();},animation:function(elem){var
pattern=/[0-9]$/,boxChamada=this.element.find(".container-video ul"),posActive=(parseInt(this.element.find(".lst-nav li.on").attr("id").match(pattern),10)),posCurrent=(parseInt(elem.attr("id").match(pattern)[0],10)),elemActive=boxChamada.find("#box-video-"+posActive),target=boxChamada.find("#box-video-"+posCurrent),from=this.lastHover,out=!elem.hasClass("mouseOn");if(!from){from=elemActive;}
if(this.lastOut){this.lastOut.stop(true,true);from.css({"z-index":"3","opacity":"1"});}
if(out){target=elemActive;}
target.css({"z-index":"2","opacity":"1"});if(from.attr("id")!=target.attr("id")){from.animate({opacity:0,easing:"easeOutBounce"},{duration:300,queue:false,complete:function(){from.css({"z-index":"1"});target.css({"z-index":"3","opacity":"1"});}});}
this.lastHover=target;this.lastOut=from;},thumbHover:function(){var
self=this,elem,timeOut;this.element.find(".lst-nav li").hover(function(){elem=$(this);if(!elem.hasClass("on")){clearTimeout(timeOut);elem.addClass("mouseOn");timeOut=setTimeout(function(){self.animation(elem);},200);}},function(){elem=$(this);if(!elem.hasClass("on")){clearTimeout(timeOut);self.element.find(".lst-nav li").removeClass("mouseOn");timeOut=setTimeout(function(){self.animation(elem);},200);}});},thumbClick:function(){var
self=this,regex=/.*[A-Z]{3}(\d+)-.*/,elemVideo;this.element.find(".lst-nav li").click(function(e){var elem=$(this);if(!elem.hasClass("on")){var elemId=parseInt(elem.attr("id").match(/[0-9]$/),10),boxVideo=self.element.find("#box-video-"+elemId),videoId=parseInt(regex.exec(elem.find("a").attr("href"))[1],10),elemActive=self.element.find(".lst-nav li.on"),sitePage=elem.find("a").attr("rel"),lstVideos=self.element.find(".container-video li");self.element.find("#box-video-1 .play").remove();elemActive.removeClass("on assistindo");elem.addClass("on assistindo");lstVideos.removeAttr("style").removeClass("on");boxVideo.addClass("on");if(elemVideo){elemVideo.html("");}
elemVideo=self.element.find("#box-video-"+elemId+" .player-video").player({videosIDs:videoId,sitePage:sitePage,autoPlay:true,width:288,height:216,complete:"$.glb.boxVideoTriplo.prototype.videoComplete",onPlay:"$.glb.boxVideoTriplo.prototype.videoPlay"});}
e.preventDefault();});this.element.find(".video a").click(function(e){var
elem=$(this),pattern=/[0-9]$/,elemId=parseInt(pattern.exec(elem.parents("li").attr("id")),10),sitePage=elem.attr("rel");videoId=parseInt(regex.exec(elem.attr("href"))[1],10);if(elemVideo){elemVideo.html("");}
self.element.find("#thumb-video-"+elemId).addClass("assistindo");elemVideo=elem.parent().find(".player-video").player({videosIDs:videoId,sitePage:sitePage,autoPlay:true,width:288,height:216,complete:"$.glb.boxVideoTriplo.prototype.videoComplete",onPlay:"$.glb.boxVideoTriplo.prototype.videoPlay"});e.preventDefault();});},videoComplete:function(){$(".widget-video-triplo .lst-nav").find(".assistindo").removeClass("assistindo");},videoPlay:function(){$(".widget-video-triplo .lst-nav").find(".on").addClass("assistindo");}});var RCT={init:function(){if($('#rct').size()===0){return false;}
return this.Gallery.init()&&this.SearchForm.init();},Gallery:{init:function(){this.index=5;this.list=$('#rct-categories > li');this.prevButton=$('#rct-controls .prev');this.nextButton=$('#rct-controls .next');this.enableButtons();return true;},scrollGallery:function(direction,i){var self=this;this.disableButtons();if(i<0){i=this.list.size()-1;}
else if(i===this.list.size()){i=0;}
this.current().fadeOut(300,function(){self.itemAt(i).fadeIn(300);self.enableButtons();});this.index=i;},enableButtons:function(){var self=this;this.prevButton.mousedown(function(e){self.prevButton.addClass('active');}).mouseup(function(e){self.scrollGallery(1,self.index-1);});this.nextButton.mousedown(function(e){self.nextButton.addClass('active');}).mouseup(function(e){self.scrollGallery(1,self.index+1);});},disableButtons:function(){this.prevButton.removeClass("active").unbind();this.nextButton.removeClass("active").unbind();},current:function(){return this.itemAt(this.index);},itemAt:function(i){return $(this.list[i]);}},SearchForm:{init:function(){this.emptyClicks=0;this.search=$('#rct-search');this.link=$('#rct-search-link');this.link.click(this.toggleSearch);this.activateSearchEvents();return true;},toggleSearch:function(e){var elem=$(this);if(elem.attr('toggleRunning')==='true'){return elem;}
elem.attr('toggleRunning',true);var reEnable=function(){elem.attr('toggleRunning',false);};if(elem.hasClass('close')){elem.html('buscar');elem.removeClass('close');RCT.SearchForm.cleanQueryErrors();$('#rct-search').hide();$('#rct-categories, #rct-controls').fadeIn(300,reEnable);}
else{elem.html('fechar');elem.addClass('close');$('#rct-categories, #rct-controls').hide();$('#rct-search').fadeIn(300,function(){RCT.SearchForm.query.focus();reEnable();});}},activateSearchEvents:function(){var self=this;this.queryWrapper=this.search.find('.query');this.queryWrapper.click(function(e){$(this).find('input.text').focus();});this.query=this.queryWrapper.find('input.text');this.query.focus(function(e){self.queryWrapper.addClass('focus');self.cleanQueryErrors();}).blur(function(e){self.queryWrapper.removeClass('focus');});this.search.find('input.submit').mousedown(function(e){$(this).addClass('active');}).mouseup(function(e){$(this).removeClass('active');});this.search.submit(function(e){var val=self.query.val();var msg="Ops! Digite aqui...";if(val.match(/\w+/)&&val!==msg){return true;}
self.query.val(msg);self.queryWrapper.addClass('error');return e.preventDefault();});},cleanQueryErrors:function(){if(this.queryWrapper.hasClass('error')){this.query.val('');this.queryWrapper.removeClass('error');}}}};RCT.init();(function($){if(!document.defaultView||!document.defaultView.getComputedStyle){var oldCurCSS=jQuery.curCSS;jQuery.curCSS=function(elem,name,force){if(name==='background-position'){name='backgroundPosition';}
if(name!=='backgroundPosition'||!elem.currentStyle||elem.currentStyle[name]){return oldCurCSS.apply(this,arguments);}
var style=elem.style;if(!force&&style&&style[name]){return style[name];}
return oldCurCSS(elem,'backgroundPositionX',force)+' '+oldCurCSS(elem,'backgroundPositionY',force);};}
var oldAnim=$.fn.animate;$.fn.animate=function(prop){if('background-position'in prop){prop.backgroundPosition=prop['background-position'];delete prop['background-position'];}
if('backgroundPosition'in prop){prop.backgroundPosition='('+prop.backgroundPosition;}
return oldAnim.apply(this,arguments);};function toArray(strg){strg=strg.replace(/left|top/g,'0px');strg=strg.replace(/right|bottom/g,'100%');strg=strg.replace(/([0-9\.]+)(\s|\)|$)/g,"$1px$2");var res=strg.match(/(-?[0-9\.]+)(px|\%|em|pt)\s(-?[0-9\.]+)(px|\%|em|pt)/);return[parseFloat(res[1],10),res[2],parseFloat(res[3],10),res[4]];}
$.fx.step.backgroundPosition=function(fx){if(!fx.bgPosReady){var start=$.curCSS(fx.elem,'backgroundPosition');if(!start){start='0px 0px';}
start=toArray(start);fx.start=[start[0],start[2]];var end=toArray(fx.options.curAnim.backgroundPosition);fx.end=[end[0],end[2]];fx.unit=[end[1],end[3]];fx.bgPosReady=true;}
var nowPosX=[];nowPosX[0]=((fx.end[0]-fx.start[0])*fx.pos)+fx.start[0]+fx.unit[0];nowPosX[1]=((fx.end[1]-fx.start[1])*fx.pos)+fx.start[1]+fx.unit[1];fx.elem.style.backgroundPosition=nowPosX[0]+' '+nowPosX[1];};})(jQuery);$(document).ready(function(){var $tchtd=$('#tchtd');var $imgProdutoAtivo=$tchtd.find('.link-produto');var $containerProdutos=$tchtd.find('.container-produtos');var TechTudoWidget={TAMANHO_LISTA:5,REFRESH_RATE:4000,PADDING:12,IMAGE:{width:120,height:140},CATEGORIA_BASE:'tchtd-',pointer:{categoria:null,item:null},itemAtual:null,init:function(){var klass=this;$tchtd.find('ol li a').mouseover(function(evt){window.clearInterval(klass.interval);if($tchtd.find('voided').size()===0){var $this=$(this);var pos=$this.parent('li').attr('class').replace(/n([0-9]+).*/,"$1");pos=parseInt(pos,10);klass.alteraImagem(klass.pointer.categoria,pos).marcaSeletor(pos);}});$tchtd.find('.categorias a.selected').click(function(){var $this=$(this);if($this.parent().hasClass(voided')){$this.next('ul').slideUp('fast',function(){$(this).parent().removeClass(voided');});}
else{$this.next('ul').slideDown('fast').parent().addClass(voided');}
return false;});$tchtd.find('.categorias li a').click(function(){var $this=$(this);var rel=klass.parseCategoria($this.attr('rel'));$this.parents('ul').slideUp('fast',function(){$(this).parent().removeClass(voided');});klass.mudaCategoria(rel);window.clearInterval(klass.interval);klass.loop(klass.REFRESH_RATE);return false;});$containerProdutos.css({'background-position':'100% '+this.PADDING+'px'});this.pointer.categoria=Math.floor(Math.random()*3);this.pointer.item=1;$tchtd.find('#'+this.getCategoria(this.pointer.categoria)).show();klass.alteraImagem(this.pointer.categoria,1,true);this.mudaCategoria(this.pointer.categoria).marcaSeletor(1);this.loop(this.REFRESH_RATE);return this;},alteraImagem:function(cat,pos,noCheck){var href=$tchtd.find('#'+cat+' .n'+pos+' a').text();var posicaoSprites=this.calculaPosicaoSprite(cat,pos);var posCSS=posicaoSprites.x+'px '+posicaoSprites.y+'px';if(noCheck||(posCSS!=$imgProdutoAtivo.css('background-position'))){$imgProdutoAtivo.stop().fadeTo('fast',0,function(){$imgProdutoAtivo.attr('href',href).css('background-position',posCSS).fadeTo('slow',1);});}
return this;},calculaPosicaoSprite:function(cat,item){return{x:cat*-this.IMAGE.width,y:(item-1)*-this.IMAGE.height};},marcaSeletor:function(pos,fxOff){var LIST_ITEM_HEIGHT=$tchtd.find('ol:visible li:first').outerHeight(true);if(fxOff&&$.browser.msie){var top=(pos-1)*LIST_ITEM_HEIGHT+this.PADDING;$containerProdutos.css({'background-position':'100% '+top+'px'});}
else{var offsetTop=((pos-1)*LIST_ITEM_HEIGHT)+this.PADDING;$containerProdutos.stop(true).animate({backgroundPosition:'100% '+offsetTop+'px'},200,'linear');}
$tchtd.find('ol:visible li.ativo').removeClass('ativo');$tchtd.find('ol:visible .n'+pos).addClass('ativo');return this;},alteraLabelMenu:function(cat){var $itemSelecionado=$tchtd.find('ul li a[rel='+this.getCategoria(cat)+']');var str=$itemSelecionado.text();$itemSelecionado.parent().hide().siblings().show();$tchtd.find('.categorias .selected').text(str);return this;},mudaCategoria:function(cat){var klass=this;var $listaVisible=$tchtd.find('ol:visible');var categoriaAtual=this.getCategoria(cat);klass.pointer.item=1;klass.pointer.categoria=cat;this.alteraLabelMenu(cat);if($listaVisible.attr('id')!=categoriaAtual){this.setTransitionBegin();$listaVisible.fadeOut('fast',function(){$tchtd.find('#'+categoriaAtual).fadeIn('fast',klass.setTransitionEnd);klass.alteraImagem(cat,1).marcaSeletor(1,true);});}
return this;},loop:function(ms){var klass=this;this.interval=window.setInterval(function(){var categoriaAtual=klass.getCategoria(klass.pointer.categoria);var numCategorias=klass.getTotalCategorias();var fxOff=false;if(klass.pointer.item<klass.TAMANHO_LISTA){klass.pointer.item++;}
else{if(klass.pointer.categoria<numCategorias-1){klass.pointer.categoria++;}
else{klass.pointer.categoria=0;}
fxOff=$.browser.msie;categoriaAtual=klass.pointer.categoria;klass.mudaCategoria(categoriaAtual);}
klass.marcaSeletor(klass.pointer.item,fxOff).alteraImagem(klass.pointer.categoria,klass.pointer.item);},ms);},setTransitionBegin:function(){if($.browser.msie){$containerProdutos.addClass('transition');}},setTransitionEnd:function(){if($.browser.msie){$containerProdutos.removeClass('transition');}},getCategoria:function(cat){return this.CATEGORIA_BASE+cat;},getTotalCategorias:function(){return $tchtd.find('ol').size();},parseCategoria:function(str){return parseInt(str.replace(/.+?([0-9]+)/,"$1"),10);}};TechTudoWidget.init();});$(document).ready(function(){var $tchtd=$('#tchtd2');var $imgAtivo=$tchtd.find('.img-destaque');var TechTudoWidgetDinamico={REFRESH_RATE:3000,ANIMATION_DUR:500,init:function(){return this.setup();},setup:function(){var klass=this;var link=$('<a></a>');$tchtd.find('.destaque-categoria').each(function(i){var $this=$(this);var href=$(this).next('.destaque-titulo').attr('href');$this.wrap(link.clone().attr('href',href));}).end().find('.destaque-titulo').each(function(){var $this=$(this);$this.data({'height':$this.outerHeight()});}).hide();$tchtd.find('.box-destaque').mouseenter(function(evt){window.clearInterval(klass.interval);var $target=$(this);if(!$target.hasClass('box-destaque')){$target=$target.parent('.box-destaque');}
klass.marcaSeletor($target).alteraImagem($target);});$tchtd.mouseleave(function(){window.clearInterval(klass.interval);klass.loop(klass.REFRESH_RATE);});this.marcaSeletor($tchtd.find('.box-destaque:first')).alteraImagem($tchtd.find('.box-destaque:first'));this.loop(this.REFRESH_RATE);},loop:function(ms){var klass=this;klass.interval=window.setInterval(function(){var $ativo=klass.getItemAtivo();var $next=$ativo.next('.box-destaque');if($next.size()===0){$next=$tchtd.find('.box-destaque:first');}
klass.marcaSeletor($next).alteraImagem($next);},ms);},alteraImagem:function($el){var href=$el.find('a.destaque-titulo').attr('href');var src=$el.find('a.destaque-foto img').attr('src');var srcAtual=$imgAtivo.find('img').attr('src');if(src!==srcAtual){$imgAtivo.stop().fadeTo('fast',0,function(){$imgAtivo.fadeTo('slow',1).attr('href',href).find('img').attr('src',src).show();});}
return this;},marcaSeletor:function($el){var $ativo=this.getItemAtivo();var klass=this;if($ativo[0]!==$el[0]){this.desmarcaSeletor($ativo);}
if(!$el.hasClass('ativo')){$el.css({backgroundPosition:'-200px 0'}).stop().animate({backgroundPosition:'0 0','height':'72px'},this.ANIMATION_DUR).find('.destaque-titulo').stop(true).delay(this.ANIMATION_DUR*0.8).fadeTo(this.ANIMATION_DUR,1,function(){var index=klass.getElementIndex($el);if(index==0){klass.aplicaSeparador($tchtd.find('.box-destaque').eq(1));}
else if(index==2){klass.aplicaSeparador($tchtd.find('.box-destaque').eq(0));}}).end().addClass('ativo');}
return this;},desmarcaSeletor:function($el){this.removeSeparadores();$el.removeClass('ativo').stop().animate({backgroundPosition:'-200px 0','height':'14px'},this.ANIMATION_DUR,function(){$(this).removeClass('ativo');}).find('.destaque-titulo').stop(true).delay(this.ANIMATION_DUR*0.8).fadeTo(this.ANIMATION_DUR,0);return this;},aplicaSeparador:function($el){if(!$el.hasClass('.ativo')){$el.addClass('separador').css({'background-position':'50% 100%'});}
return this;},removeSeparadores:function(){$tchtd.find('.separador').removeClass('separador').css({'background-position':'-200px 0'});return this;},getItemAtivo:function(){return $tchtd.find('.box-destaque.ativo');},getElementIndex:function($el){return $tchtd.find('.box-destaque').index($el);}};TechTudoWidgetDinamico.init();});$.widget('glb.topglobocom2',{options:{buscaUrl:'/tagcloud/globo-tagCloud.txt'},_create:function(){this.tabContents=this.element.find('div.tab-content');this.itensList=this.element.find('.itens');this.links=this.itensList.find('a');this.lis=this.itensList.find('li');this.currentIndex=0;this.hasSearchedBefore=false;this._attachEvents();},_attachEvents:function(){var self=this;this.links.each(function(i,link){$(link).click(function(){if(self.currentIndex==i){return false;}
if(i==1){self.getSearchTermsAndPopulateTagCloud();}
var newContent=self.tabContents.eq(i);var oldContent=self.tabContents.eq(self.currentIndex);var others=self.tabContents.not(newContent);self.currentIndex=i;self.tabContents.css('z-index',1);oldContent.css('z-index',3);newContent.stop().css({'z-index':2,'opacity':''}).show();var newLi=self.lis.eq(i);self.lis.removeClass('selected');newLi.addClass('selected');oldContent.stop().animate({opacity:0},{duration:300,complete:function(){oldContent.hide();}});self.getAnalytics($(this));return false;});});},sortByProperty:function(obj,property,desc){obj.sort(function(obj1,obj2){var offset=(desc)?-1:1;return obj1[property]<obj2[property]?-1*offset:(obj1[property]>obj2[property]?1*offset:0);});},getSearchTermsAndPopulateTagCloud:function(){var self=this;if(self.hasSearchedBefore){return;}
var distribution={maior:4,grande:8,medio:14,pequeno:14};var numberOfItems=distribution.maior+
distribution.grande+
distribution.medio+
distribution.pequeno;var getClassFor=function(item){for(var key in distribution){if(distribution[key]){distribution[key]--;return key;}}};var searchUrlFor=function(term){return"httpdisabled://busca.globo.com/Busca/?query="+term;};var populateTagCloud=function(data){self.sortByProperty(data,'frequency',true);var items=data.slice(0,numberOfItems);$.each(items,function(){this.category=getClassFor(this);});self.sortByProperty(items,"term");var tagCloud=self.tabContents.eq(1).find('.tag-cloud');var busca=self.tabContents.eq(1).find('.busca');var tagCouldUl=$('<ul/>');tagCloud.empty();$.each(items,function(){var item=this;var li=$('<li><a title="Busca por '+item.term+'" href="'+searchUrlFor(item.term)+'&annotationClass=no" rel="tag">'+item.term+'</a></li>');li.addClass(item.category);tagCouldUl.append(li);});tagCloud.append(tagCouldUl).show();busca.show();};$.getJSON(self.options.buscaUrl,function(data){self.hasSearchedBefore=true;populateTagCloud(data);});},getAnalytics:function(link){if(libby.analytics.links.generateAnalytics){var url=link.attr("href");var value;if(url.indexOf("mais-vistas")!==-1){value="R";}else if(url.indexOf("mais-buscadas")!==-1){value="X";}else if(url.indexOf("mais-sociais")!==-1){value="Q";}
libby.analytics.links.generateAnalytics(link,value);}}});$('#topglobocom2').topglobocom2();